<div class="layout-comparer">
  <div class="header">
    <div class="title-section-comparer">
      <h4>PLT Comparer &nbsp;</h4>
      <i class="icon-plus" (click)="showModal()"></i>
      <nz-modal
        style="width: 95%;"
        [(nzVisible)]="isVisible"
        nzFooter=" "
        nzTitle="Browse For Comparer"
        (nzOnCancel)="handleCancel()">
        <nz-select
          nzShowSearch
          nzAllowClear
          class="dropdown-default"
          style="width: 200px; margin-bottom: 5px;"
          nzPlaceHolder="Select Workspace"
          (ngModelChange)="getWorkspaceData($event);"
          [(ngModel)]="defaultImport">
          <nz-option nzCustomContent *ngFor="let item of listOfWs.data" [nzLabel]="item.workSpaceId" [nzValue]="item"><span>{{item.workSpaceId}} - {{item.uwYear}}</span></nz-option>
        </nz-select>
        <div class="my-tabs">
        <app-plt-left-menu
          [menuInputs]="{
            tagContextMenu: this.tagContextMenu,
            wsId: this.workspaceId,
            uwYear: this.uwy,
            projects: this.projects,
            showDeleted: this.showDeleted,
            filterData: this.filterData,
            filters: this.filters,
            addTagModalIndex: this.tagModalIndex,
            fromPlts: this.fromPlts,
            deletedPltsLength: (this.deletedPlts | keys).length,
            userTags: this.userTags,
            systemTags: this.systemTags,
            selectedListOfPlts: this.selectedListOfPlts,
            systemTagsCount: this.systemTagsCount,
            _tagModal: this.addTagModal,
            _renamingTag: this.renamingTag
          }"
          (onAssignPltsToTag)="assignPltsToTag($event)"
          (onProjectFilter)="filter($event)"
          (onRenameTag)="renameTag($event)"
          (onResetPath)="resetPath()"
          (onSelectProjects)="setSelectedProjects($event)"
          (onSelectSysTagCount)="selectSystemTag($event)"
          (onSetFilters)="setFilters($event)"
          (onSetFromPlts)="setFromPlts($event)"
          (onSetSelectedSystemTags)="setSysTags($event)"
          (onSetSelectedUserTags)="setUserTags($event)"
          (onToggleDeletedPlts)="showDeleted= !showDeleted"
          (setTagModalIndex)="setModalIndex($event)"
          (setTagModalVisibility)="setTagModal($event)"
          (onSetTagForMenu)="setTagForMenu($event)"
          (onSetRenameTag)="setRenameTag($event)"
        >

        </app-plt-left-menu>
          <div class="tabset-right">
            <div class="title-as-tab">
          <span>
            PLTs
          </span>
            </div>
            <div class="PLTs-content">
              <i class="icon-menu_24px" style="position: absolute;top: 15px;right: 2px;z-index: 10;cursor: pointer;font-size: 15px;"></i>
        <app-plt-main-table
          [tableInputs]="{
                  contextMenuItems: this.contextMenuItems,
                  pltColumns: this.pltColumns,
                  listOfPltsData: this.listOfPltsData,
                  listOfPltsCache: this.listOfPltsCache,
                  listOfPlts: this.listOfPlts,
                  selectedPlt: this.selectedPlt,
                  selectedListOfPlts: this.selectedListOfPlts,
                  deletedPlts: this.deletedPlts,
                  selectAll: this.selectAll,
                  someItemsAreSelected: this.someItemsAreSelected,
                  showDeleted: this.showDeleted,
                  filterData: this.filterData,
                  filters: this.filters,
                  sortData: this.sortData
                }"
          (onCheckAll)="checkAll()"
          (onCheckBoxSort)="checkBoxSort($event)"
          (onFilter)="filter($event)"
          (onItemSelectForMenu)="setSelectedMenuItem($event)"
          (onPltClick)="toggleSelectPlts($event)"
          (onSelectSinglePlt)="selectSinglePLT($event)"
          (onSortChange)="sortChange($event)"
        ></app-plt-main-table>
            </div>
        </div>
        </div>
      </nz-modal>
    </div>

    <div class="Deltas">Deltas &nbsp;
      <div class="button-toggle">
        <nz-switch class="switch-input" (ngModelChange)="selectFirst($event)" [(ngModel)]="switchValue"></nz-switch>
      </div>
      <div style="width: 200px;">
        <nz-select *ngIf="switchValue"

                   nzShowSearch
                   nzAllowClear
                   class="dropdown-default"
                   nzPlaceHolder="Baseline"
                   [(ngModel)]="defaultImport" style="width: 140px;"
        >
          <nz-option nzLabel="Baseline" nzValue="Baseline"></nz-option>
          <nz-option nzLabel="Year-On-Year" nzValue="Year-On-Year"></nz-option>
        </nz-select>
      </div>
    </div>
    <div class="dropdown-group">
      <div class="body-wrap-dropDowns-comparer">
        <nz-dropdown [nzTrigger]="'click'">
          <div class="dropdown-wrap-comparer" nz-dropdown>
            <div class="dropdown-wrap-title-comparer">
              <span class="dropdown-title-comparer">Display Currency</span>
              <span class="dropdown-item-selected-comparer">
              EUR
              </span>
            </div>
            <div class="dropdown-icon">
              <i nz-icon type="down"></i>
            </div>
          </div>
          <ul nz-menu>
            <li nz-menu-item s
            >items
            </li>
          </ul>
        </nz-dropdown>
      </div>
      <div class="body-wrap-dropDowns-comparer">
        <nz-dropdown [nzTrigger]="'click'">
          <div class="dropdown-wrap-comparer" nz-dropdown>
            <div class="dropdown-wrap-title-comparer">
              <span class="dropdown-title-comparer">Financial Unit</span>
              <span class="dropdown-item-selected-comparer">
              Millions
              </span>
            </div>
            <div class="dropdown-icon">
              <i nz-icon type="down"></i>
            </div>
          </div>
          <ul nz-menu>
            <li nz-menu-item s
            >items
            </li>
          </ul>
        </nz-dropdown>
      </div>
      <nz-select
        [nzMaxTagCount]="1"
        nzMode="multiple"
        nzPlaceHolder="EP Metrics"
        (ngModelChange)="toggleColumns($event)"
        [(ngModel)]="listOfSelectedValues" style="width: 211px; height: 35px;"
      >
        <nz-option nzLabel="OEP" nzValue="OEP"  nzDisabled></nz-option>
        <nz-option nzLabel="AEP" nzValue="AEP"></nz-option>
        <nz-option nzLabel="TVaR-OEP" nzValue="TVaR-OEP"></nz-option>
        <nz-option nzLabel="TVaR-AEP" nzValue="TVaR-AEP"></nz-option>
        <nz-option nzLabel="EEF" nzValue="EEF"></nz-option>
        <nz-option nzLabel="CEP" nzValue="CEP"></nz-option>
      </nz-select>
    </div>

    <div class="export">
      <button class="button-outlined">
        EXPORT
      </button>
    </div>
  </div>
  <div class="body">
    <div class="lefter">
      <div class="cards-wrapper1">
        <div class="card-header-title" style="height: 88px;">
        </div>
        <div class="card-table">
          <table>
            <thead>
            <tr>
              <th>Return Period</th>
            </tr>
            </thead>
            <tbody style="text-align: right;">
            <tr>
              <th>10,000</th>
            </tr>
            <tr>
              <th>5,000</th>
            </tr>
            <tr>
              <th>1,000</th>
            </tr>
            <tr>
              <th>500</th>
            </tr>
            <tr>
              <th>250</th>
            </tr>
            <tr>
              <th>200</th>
            </tr>
            <tr>
              <th>100</th>
            </tr>
            <tr>
              <th>50</th>
            </tr>
            <tr>
              <th>25</th>
            </tr>
            <tr>
              <th>10</th>
            </tr>
            <tr>
              <th>5</th>
            </tr>
            <tr>
              <th>2</th>
            </tr>
            <tr>
              <th><input class="input-default" style="width: 100%" type="text" name="new-field"></th>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="card-footer-detail">
          <div class="card-table-row" style="width: 134px;">
            <div>Pure Premium &nbsp;
              Standard Deviation&nbsp;
              CoV
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="righter">
      <div cdkDropList cdkDropListOrientation="horizontal" class="example-list" (cdkDropListDropped)="drop($event)">
        <div [class.selected-item]="item.selected == true" *ngFor="let item of cardContainer; let i = index" class="card-outer" cdkDrag>

          <div class="cards-wrapper" *ngIf="!item.deleted" [ngStyle]="{'border-top': item.selected ? 'none' : '5px solid ' + item.color ,
    'border-bottom': item.selected ? 'none' : '5px solid transparent',
    'height':item.selected ? ' 500px' : ''}" (contextmenu)="contextMenu($event, template)">
            <i class="icon-cancel_24px" (click)="deleteItem(i)" style="font-size: 15px; color: darkred;cursor: pointer;"></i>
            <div class="card-header-title">
              <div class="card-header-detail">
                <span style="font-weight: bold; font-size:15px;">{{item.title}}</span><br>
                <span>{{item.subtitle}}</span><br>
                <span style="font-size: 10px;">{{item.tableHeader}}</span>
              </div>
              <div class="card-header-icons">
                <i *ngIf="!item.selected" [ngStyle]="{'visibility': switchValue ? 'visible' : 'hidden'}"
                   class="icon-check-circle" (click)="selectItem($event); item.selected = !item.selected"></i>
                <i *ngIf="item.selected" class="icon-check_24px" (click)="item.selected = !item.selected"></i>
                <span
                  [ngStyle]="{'visibility': switchValue ? 'visible' : 'hidden', 'color': item.selected? '#03DAC4' : '' }">BL</span>
                <i nz-icon nzType="line-chart" nzTheme="outline"></i>
              </div>
            </div>
            <div class="card-table">
              <table>
                <thead>
                <tr>
                  <th>OEP</th>
                  <th *ngIf="switchValue && !item.selected" style="background-color: #F4F6FC; color: #0700CF;">
                    <div style="margin-bottom:6px;"><i class="icon-triangle" style="font-size: 20px;"></i> OEP</div>
                  </th>
                  <th *ngIf="switchValue && !item.selected"
                      style="background-color: #F4F6FC; color: #0700CF;"> OEP%
                  </th>
                  <th *ngIf="switchValue && !item.selected" style="background-color: #F4F6FC; color: #0700CF;">
                    <div style="margin-bottom:6px;"><i class="icon-triangle" style="font-size: 20px;"></i> AEP</div>
                  </th>
                  <th *ngIf="switchValue && !item.selected"
                      style="background-color: #F4F6FC; color: #0700CF;"> AEP %
                  </th>
                  <th *ngFor="let th of listOfSelectedValues">
                    {{th}}
                  </th>

                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let row of item.table">
                  <th>{{row[0]}}</th>
                  <th *ngIf="switchValue && !item.selected" style="background-color: #F4F6FC;">{{row[1]}}</th>
                  <th *ngIf="switchValue && !item.selected" style="background-color: #F4F6FC;">{{row[4]}}</th>
                  <th *ngIf="switchValue && !item.selected" style="background-color: #F4F6FC;">{{row[3]}}</th>
                  <th *ngIf="switchValue && !item.selected" style="background-color: #F4F6FC;">{{row[4]}}</th>
                  <th *ngFor="let th of listOfSelectedValues" >{{row[2]}}</th>
                </tr>
                <tr>
                  <th><input class="input-default" style="width: 100%; margin: 0px;" type="text" name="new-field"></th>
                  <th *ngIf="switchValue && !item.selected"><input class="input-default" style="width: 100%; margin: 0px;" type="text"
                                                                   name="new-field"></th>
                  <th *ngIf="switchValue && !item.selected"><input class="input-default" style="width: 100%; margin: 0px;" type="text"
                                                                   name="new-field"></th>
                  <th *ngIf="switchValue && !item.selected"><input class="input-default" style="width: 100%; margin: 0px;" type="text"
                                                                   name="new-field"></th>
                  <th *ngIf="switchValue && !item.selected"><input class="input-default" style="width: 100%; margin: 0px;" type="text"
                                                                   name="new-field"></th>
                  <th *ngFor="let th of listOfSelectedValues"><input class="input-default" style="width: 100%; margin: 0px;" type="text"
                                                                     name="new-field"></th>
                </tr>
                </tbody>
              </table>
            </div>
            <div class="card-footer-detail">
              <div class="card-table-row">
                <div *ngFor="let row of item.result">{{row[0]}}</div>
              </div>
              <!--<div *ngIf="switchValue && !item.selected" class="card-table-row">-->
                <!--<div *ngFor="let row of item.result">{{row[1]}}</div>-->
              <!--</div>-->
            </div>
          </div>
        </div>
      </div>
    </div>
    <ng-template #template>
      <ul nz-menu nzInDropDown (nzClick)="close($event)">
        <li nz-menu-item>View details</li>
      </ul>
    </ng-template>
  </div>
  <div class="footer-comparer">
    <div class="footer-title">EP Curves</div>
    <div>
      <img style="width: 100%" src="../../../../assets/images/Capture.PNG"/>
    </div>
  </div>
</div>
