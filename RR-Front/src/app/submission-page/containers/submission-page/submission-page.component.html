<div class="form-title">
  <h4>CAR Submission Page</h4>
</div>
<div class="form-control-wrap">
  <div class="form-wrapper">
    <div class="form-left">
      <div class="form-controller"><span class="subtitle-2">UW Analysis <span style="color: red">*</span></span>
        <div class="input-form-wrap"><input [(ngModel)]="uwAnalysis" class="a-textfield-mini"></div>
      </div>
      <div class="form-controller"><span class="subtitle-2">UW Year <span style="color: red">*</span></span>
        <div class="input-form-wrap"><input [(ngModel)]="uwYear" class="a-textfield-mini"></div>
      </div>
      <div class="form-controller"><span class="subtitle-2">Contract Label</span>
        <div class="input-form-wrap"><input [(ngModel)]="contractLabel" class="a-textfield-mini"></div>
      </div>
      <div class="form-controller"><span class="subtitle-2">Business Type <span style="color: red">*</span></span>
        <div class="input-form-wrap">
          <nz-select style="width: 100%"
                     [(ngModel)]="businessType.value" nzShowSearch
                     class="a-dropdown-small"
                     nzPlaceHolder="TAG CURRENCY">
            <nz-option *ngFor="let item of businessType.option" [nzLabel]="item" [nzValue]="item"></nz-option>
          </nz-select>
        </div>
      </div>
      <div class="form-controller"><span class="subtitle-2">Sector</span>
        <div class="input-form-wrap"><input [(ngModel)]="sector" class="a-textfield-mini"></div>
      </div>
    </div>
    <div class="form-center">
      <div class="form-controller"><span class="subtitle-2">Contract ID <span style="color: red">*</span></span>
        <div class="input-form-wrap"><input [(ngModel)]="contractId" class="a-textfield-mini"></div>
      </div>
      <div class="form-controller"><span class="subtitle-2">Insured <span style="color: red">*</span></span>
        <div class="input-form-wrap"><input [(ngModel)]="insured" class="a-textfield-mini"></div>
      </div>
      <div class="form-controller"><span class="subtitle-2">Subsidiary <span style="color: red">*</span></span>
        <div class="input-form-wrap">
          <nz-select style="width: 100%"
                     [(ngModel)]="subsidiary.value" nzShowSearch
                     class="a-dropdown-small"
                     nzPlaceHolder="TAG CURRENCY"
          >
            <nz-option *ngFor="let item of subsidiary.option" [nzLabel]="item" [nzValue]="item"></nz-option>
          </nz-select>
        </div>
      </div>
      <div class="form-controller"><span class="subtitle-2">LOB  <span style="color: red">*</span></span>
        <div class="input-form-wrap">
          <nz-select style="width: 100%" [(ngModel)]="lob.value" nzShowSearch
                     class="a-dropdown-small"
                     nzPlaceHolder="TAG CURRENCY">
            <nz-option *ngFor="let item of lob.option" [nzLabel]="item" [nzValue]="item"></nz-option>
          </nz-select>
        </div>
      </div>
      <div class="form-controller"><span class="subtitle-2">Raised By <span style="color: red">*</span></span>
        <div class="input-form-wrap">
          <nz-select style="width: 100%" [(ngModel)]="raisedBy.value" nzShowSearch
                     class="a-dropdown-small"
                     nzPlaceHolder="TAG CURRENCY">
            <nz-option *ngFor="let item of raisedBy.option" [nzLabel]="item" [nzValue]="item"></nz-option>
          </nz-select>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="form-control-wrap show-table">
  <h6>Division Section</h6>
  <p-table #kt [columns]="coverageTemplate" [value]="dataCoverage"
           [resizableColumns]="true" columnResizeMode="expand"
           [scrollable]="true" scrollHeight="340px" >
    <ng-template pTemplate="colgroup" let-columns>
      <colgroup>
        <col *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
      </colgroup>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th *ngFor="let col of columns" pResizableColumn>
          <div *ngIf="col.header !== 'selected'">
            {{col.header}}
            <p-sortIcon style="position: absolute; float: right;"
                        [field]="col.field" ariaLabel="Activate to sort"
                        ariaLabelDesc="Activate to sort in descending order"
                        ariaLabelAsc="Activate to sort in ascending order">
            </p-sortIcon>
          </div>
          <div class="search-bar-table" *ngIf="col.filtered">
            <i class="fa fa-search" style="margin: 6px 4px 4px 6px"></i>
            <input pInputText type="text"
                   (input)="kt.filter($event.target.value, col.field, col.filterMatchMode)">
          </div>
        </th>
      </tr>
      <tr>
        <th *ngFor="let col of columns">
          <input *ngIf="col.type !== 'action'" style="width:95%" class="a-textfield-mini">
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
      <tr>
        <td *ngFor="let col of columns"
            [ngClass]="{'selected-item': rowData?.selected}"
            [ngStyle]="{'background-color': rowData['AlreadyImported'] ? '#EBEEFB' : '#FFF'}">
          <div style=" display: flex;" *ngIf="col.type === 'select'">
            <label nz-checkbox (ngModelChange)="checkRow($event, rowData, 'A&P')"
                   [ngModel]="rowData.selected"></label>
          </div>
          <div class="text-data" (click)="selectRows(rowData, i, 'A&P')"
               *ngIf="col.type === 'text'"><span>{{rowData[col.field]}}</span></div>
          <div class="text-data" (click)="selectRows(rowData, i, 'A&P')"
               *ngIf="col.type === 'date'"><span>{{rowData[col.field] | date:'dd/MM/yyyy'}}</span></div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<div class="form-control-wrap">
  <h6>Coverage Section</h6>
  <div class="form-controller new-wrap"><span class="subtitle-2">Region Peril</span>
    <div class="input-form-wrap">
      <nz-select style="width: 100%" [(ngModel)]="metaData" nzShowSearch
                 nzMode="multiple"
                 class="a-dropdown-small"
                 nzPlaceHolder="TAG CURRENCY">
        <nz-option *ngFor="let item of data" [nzLabel]="item?.regionPerilDesc" [nzValue]="item?.regionPerilCode"></nz-option>
      </nz-select>
    </div>
  </div>
</div>

<div class="form-footer">
  <button class="a-buttons-contained-mini">SUBMIT</button>
</div>
