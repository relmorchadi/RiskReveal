<i style="position: absolute;right: 0px;top:5px; cursor: grab;  z-index: 9999999;color: black;font-size: 1.5em;"
   class="icon-drag_indicator_24px drag-handler"></i>
<ng-container *ngTemplateOutlet="title"></ng-container>

<ng-container *ngIf="type !== 'newCar'">
  <nz-tabset
    [(nzSelectedIndex)]="tabIndex"
    class="tabs-standard-top">
    <nz-tab>
      <div style="height: 100%" class="renewal-contract-table">
        <app-table [sortable]="true"
                   [tableColumn]="dashCols"
                   [listOfData]="data"
                   [virtualScroll]="false"
                   (dbClickItem)="openFacItem($event)"
                   (updateFavStatus)="valueFavChange($event)"
                   (sortDataChange)="sortChange($event)"
                   [sortData]="globalSort"
                   [totalRecords]="data?.length">
        </app-table>
      </div>
    </nz-tab>
    <nz-tab>
      <div style="height: 100%" class="renewal-contract-table">
        <app-table [sortable]="true"
                   [tableColumn]="dashCols"
                   [listOfData]="filterAssign()"
                   [virtualScroll]="false"
                   (dbClickItem)="openFacItem($event)"
                   (updateFavStatus)="valueFavChange($event)"
                   (sortDataChange)="sortChange($event)"
                   [sortData]="globalSort"
                   [totalRecords]="data?.length">
        </app-table>
      </div>
    </nz-tab>
  </nz-tabset>
</ng-container>

<ng-container *ngIf="type === 'newCar'">
  <div class="renewal-contract-table">
    <app-table [sortable]="true"
               [tableColumn]="dashCols"
               [listOfData]="data"
               [virtualScroll]="false" [filterModeFront]="false"
               (sortDataChange)="sortChange($event)"
               (dbClickItem)="openFacItem($event)"
               (updateFavStatus)="valueFavChange($event)"
               [sortData]="newSort" (filterData)="filterData($event)"
               [totalRecords]="data?.length">
    </app-table>
  </div>
</ng-container>


<ng-template #title>
  <div style="display: flex">
    <div class="title-wrapper">
      <span *ngIf="!editName" (click)="activeEdit()" class="title-wrapper-name">{{itemName}}</span>
      <div *ngIf="editName" class="edit-dashboard-section">
        <input class="hover-input" placeholder="" (keydown)="validateName($event, identifier)" [(ngModel)]="itemName">
      </div>
      <nz-dropdown [nzTrigger]="'click'">
        <i nz-dropdown style="cursor: pointer; font-size: 27px" class="icon-menu_24px float-right mr-1 mt1"></i>
        <ul nz-menu nzSelectable>
          <li (click)="duplicateItem(itemName)" nz-menu-item><i class="icon-file_copy_24px"></i> Duplicate</li>
          <li (click)="deleteItem(identifier, persisted)" nz-menu-item><i class="icon-trash-alt"></i> Delete</li>
        </ul>
      </nz-dropdown>

      <div style="position: absolute;top: 10px; right: 25px" >
        <nz-dropdown [nzTrigger]="'hover'" [nzPlacement]="'bottomRight'">
          <a style="max-height: 28px;display: flex;" nz-dropdown>
            <i class="icon-settings_24px"></i>
          </a>
          <ul nz-menu style="font-size: 12px">
            <li nz-menu-item>Reset Sort</li>
            <li nz-menu-item>Reset Filters</li>
            <li nz-menu-item>Reset Sort/Filters</li>
            <li nz-menu-divider></li>
            <li nz-menu-item *ngIf="type === 'newCar'" (click)="openPopUpAction('newCar')">Manage Columns</li>
            <li nz-menu-item *ngIf="type === 'inProgressCar'" (click)="openPopUpAction('inProgressCar')">Manage Columns</li>
            <li nz-menu-item *ngIf="type === 'archivedCar'" (click)="openPopUpAction('archivedCar')">Manage Columns</li>
            <li nz-menu-divider></li>
            <li nz-menu-item>Unselect All</li>
          </ul>
        </nz-dropdown>
      </div>
    </div>
    <div style="display: flex; align-items: center" *ngIf="type !== 'newCar'">
      <span (click)="selectTab(0)" [ngClass]="{'selectedTab': tabIndex === 0}"
            nz-tooltip [nzTitle]="'ALL'"
            class="tab-index">
        <i class="icon-all_inclusive_24px"></i>
      </span>
      <span (click)="selectTab(1)" [ngClass]="{'selectedTab': tabIndex === 1}"
            nz-tooltip [nzTitle]="'My Assigned'"
            class="tab-index">
        <i class="icon-user"></i>
      </span>
    </div>
  </div>
</ng-template>
