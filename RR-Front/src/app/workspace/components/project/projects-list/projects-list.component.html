<!--<cdk-virtual-scroll-viewport class="card-holder-wrap" [itemSize]="420/3">-->
<!--      <div *cdkVirtualFor="let project of projects$ | async" class="card-holder">-->
<!--  <div *cdkVirtualFor="let project of projects; let i=index" class="card-holder">-->
<div class="card-holder-wrap">
  <div *ngFor="let project of projects; let i=index" class="card-holder">
    <div class="project-card mx-1" (click)="select({projectId: project?.projectId ,projectIndex: i})"
         [ngStyle]="{'border': project?.selected ? '2px solid #06B8FF' : '2px solid transparent'}">
      <div class="project-header">
        <!--            <div style="background: #A363FF" class="project-header-icon d-flex justify-content-center align-items-center">
                      <i class="fa fa-code-fork" aria-hidden="true"></i>
                    </div>-->
        <div [ngClass]="{'link-flag-icon': project.linkFlag,
                'inuring-flag-icon': project.postInuredFlag,
                'standard-flag-icon': !project.linkFlag && !project.postInuredFlag}"
             *ngIf="project.projectType !== 'FAC'"
             class="project-header-icon d-flex justify-content-center align-items-center">
          <i *ngIf="!project.postInuredFlag"
             [className]="project.linkFlag ? 'icon-link_24px' : 'icon-assignment_24px'"></i>
          <i *ngIf="project.postInuredFlag" class="fa fa-code-fork"></i>
        </div>
        <div *ngIf="project.projectType === 'FAC'"
             class="project-header-icon d-flex justify-content-center align-items-center standard-fac-flag-icon">
          <i  class='icon-copy'></i>
        </div>
        <!--          [ngClass]="{'standard-flag-icon': project.projectFacSource === 'manual',
        'standard-fac-flag-icon': project.projectFacSource === 'specific'}"
          <i *ngIf="project.projectFacSource === 'manual'" class='icon-assignment_24px'></i>-->
        <div class="project-header-title d-flex flex-column justify-content-center">
          <div class="d-flex justify-content-between" *ngIf="project.projectType === 'FAC'">
            <div class="d-flex flex-column">
              <span>{{project?.projectName}}</span>
              <span>{{project?.projectId}}</span>
            </div>
            <div class="d-flex align-items-center">
              <div [ngStyle]="{'background': setBackground(project?.carRequestStatus)}"
                   class="car-status-temp">{{capitalize(project?.carRequestStatus)}}</div>
            </div>
          </div>
          <div class="d-flex flex-column" *ngIf="project.projectType !== 'FAC'">
            <span>{{project?.projectName}}</span>
            <span>{{project?.projectId}}</span>
          </div>
        </div>
        <div class="icon-card-wrapper">
          <nz-dropdown [nzTrigger]="'hover'" [nzPlacement]="'bottomRight'">
            <a style="max-height: 28px;display: flex;" nz-dropdown>
              <i class="icon-menu_24px"></i>
            </a>
            <ul nz-menu style="font-size: 12px">
              <li nz-menu-item class="contextMenu border-bottom"><i class="icon-archive"></i>Archive</li>
              <li nz-menu-item class="contextMenu border-bottom" *ngIf="project.projectType === 'TREATY'"
                  (click)="delete({projectId: project?.projectId ,projectIndex: i, project: project})">
                <i class="icon-trash-alt"></i>Delete
              </li>
              <li nz-menu-item (click)="edit({project: project})" class="contextMenu">
                <i class="icon-edit"></i>Edit Project Properties
              </li>
            </ul>
          </nz-dropdown>
          <!--                        <i class="icon-ellipsis-h"></i>
                                  <i *ngIf="project?.selected" class="icon-check_24px"></i>
                                  <span *ngIf="!project?.selected"></span>-->
        </div>
      </div>
      <div class="project-progress d-flex justify-content-center align-items-center">
        <div class="project-flag">
          <div style="margin-right: 3px">
            <hr>
            <span [ngStyle]="{'background-color': project?.importedFlag ? '#03DAC4' : '#FFFFFF'}" class="steper-icon">
              <span *ngIf="project?.importedFlag" class="check-true-span"></span>
            </span>
          </div>
          <span class="status-naming">Imported</span>
        </div>
        <div class="project-flag">
          <div style="margin-right: 3px">
            <hr>
            <span [ngStyle]="{'background-color': project?.publishedForPricingFlag ? '#03DAC4' : '#FFFFFF'}" class="steper-icon">
              <span *ngIf="project?.publishedForPricingFlag" class="check-true-span"></span>
            </span>
          </div>
          <span class="status-naming">Published to Pricing</span>
        </div>
        <div class="project-flag">
          <div style="margin-right: 3px">
            <hr><span class="steper-icon"></span>
          </div>
          <span class="status-naming">Priced</span>
        </div>
        <div class="project-flag">
          <div style="margin-right: 2px">
            <hr>
            <span [ngStyle]="{'background-color': project?.accumulatedFlag ? '#03DAC4' : '#FFFFFF'}" class="steper-icon">
              <span *ngIf="project?.accumulatedFlag" class="check-true-span"></span>
            </span>
          </div>
          <span class="status-naming">Accumulated</span>
        </div>
      </div>
      <div class="project-kpi border-top d-flex">
        <div style="flex:1" class="border-right d-inline-flex flex-column project-component">
          <i style=" color: rgba(0,0,0,0.3)" class="icon-location_searching_24px mb-1"></i>
          <span class="project-kpi-span">Region Perils</span>
          <span class="project-kpi-span"><b>{{project?.regionPerils || '-'}}</b></span>
        </div>
        <div style="flex:1" class="border-right d-inline-flex flex-column project-component">
          <i style="color: rgba(0,0,0,0.3)" class="icon-adjust-half mb-1"></i>
          <span class="project-kpi-span">Exp</span>
          <span class="project-kpi-span"><b>-</b></span>
        </div>
        <div style="flex:1" class="border-right d-inline-flex flex-column project-component">
          <i style="color: rgba(0,0,0,0.3)" class="icon-box mb-1"></i>
          <span class="project-kpi-span">PLT</span>
          <span class="project-kpi-span"><b>{{project?.plts || '-'}}</b></span>
        </div>
        <div style="flex:1" class="border-right d-inline-flex flex-column project-component">
          <i style="color: rgba(0,0,0,0.3)" class="icon-note mb-1"></i>
          <span class="project-kpi-span">Published</span>
          <span class="project-kpi-span"><b>{{project?.publishedForPricingCount|| '-'}}</b></span>
        </div>
        <div style="flex:1" class="border-right d-inline-flex flex-column project-component">
          <i style="color: rgba(0,0,0,0.3)" class="icon-dollar-alt mb-1"></i>
          <span class="project-kpi-span">Pricing</span>
          <span class="project-kpi-span"><b>{{project?.finalPricing || '-'}}</b></span>
        </div>
        <div style="flex:1" class="d-inline-flex flex-column project-component">
          <i style="color: rgba(0,0,0,0.3)" class="icon-focus-add mb-1"></i>
          <span class="project-kpi-span">Accum</span>
          <span class="project-kpi-span"><b>{{project?.accumulatedPlts || '-'}}</b></span>
        </div>
      </div>
      <div class="project-kpi-details pb-3">
        <div class="project-kpi-details-title flex-align-Ws line-height-m" *ngIf="project?.projectType !== 'FAC'">
          <i *ngIf="project.sourceWsName" class="icon-link_24px"></i>
          <span *ngIf="project.sourceWsName" class="source-Ws">{{project?.sourceWsId}}-{{project?.sourceWsName}}</span>
          <a class="project-link" *ngIf="project.sourceWsName">|&nbsp;&nbsp; {{project?.sourceProjectName}}
            [{{project?.sourceProjectId}}]</a>
        </div>
        <div class="d-flex flex-column project-kpi-details-title fac-detail-panel"
             *ngIf="project.projectType === 'FAC'">
          <div class="d-flex border-bottom line-height-m">
            <span class="field-car-status">CAR ID :</span>
            <span class="font-weight-bold">{{project?.carRequestId | parseId}}</span>
          </div>
          <div class="d-flex line-height-m">
            <span class="field-car-status">UW Analysis :</span>
            <span class="font-weight-bold">{{project?.uwAnalysis}}</span>
          </div>
        </div>
        <div class="project-kpi-details-title line-height-m" *ngIf="project.projectType === 'TREATY'">
          {{project?.projectDescription}}
        </div>
        <div class="border-top d-flex project-kpi-details-content">
          <span class="line-height-m intro-style">Created</span>
          <span class="line-height-m project-kpi-creat-wrap">{{project?.createdBy}}</span>
          <span class="text-center line-height-m date-style">{{project?.creationDate | date:'dd/MM/yyyy'}}</span>
        </div>
        <div class="border-top d-flex project-kpi-details-content">
          <span class="line-height-m intro-style">Last Modified</span>
          <span class="line-height-m project-kpi-creat-wrap">{{project?.lastUpdatedBy === null ? project.createdBy : getUserNameByUserId(project?.lastUpdatedBy)}}</span>
          <span *ngIf="project.lastUpdatedOn !== null" class="text-center line-height-m date-style">{{project?.lastUpdatedOn | date:'dd/MM/yyyy'}}</span>
          <span *ngIf="project.lastUpdatedOn === null" class="text-center line-height-m date-style">{{project?.creationDate | date:'dd/MM/yyyy'}}</span>
        </div>
        <div class="border-top d-flex project-kpi-details-content">
          <span class="line-height-m intro-style">Assigned Analyst</span>
          <span class="line-height-m project-kpi-creat-wrap">{{getUserName(project.assignedTo)}}</span>
          <span class="text-center line-height-m date-style"></span>
        </div>
      </div>
    </div>
  </div>
</div>


<!--  </div>-->

<!--</cdk-virtual-scroll-viewport>-->
