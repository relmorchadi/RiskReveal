<!--<cdk-virtual-scroll-viewport class="card-holder-wrap" [itemSize]="420/3">-->
<!--      <div *cdkVirtualFor="let project of projects$ | async" class="card-holder">-->
<!--  <div *cdkVirtualFor="let project of projects; let i=index" class="card-holder">-->
<div class="card-holder-wrap">
  <div *ngFor="let project of projects; let i=index" class="card-holder">
    <div class="project-card mx-1" (click)="select({projectId: project?.projectId ,projectIndex: i})"
         [ngStyle]="{'border': project?.selected ? '2px solid #06B8FF' : '2px solid transparent'}">
      <div class="project-header">
        <!--            <div style="background: #A363FF" class="project-header-icon d-flex justify-content-center align-items-center">
                      <i class="fa fa-code-fork" aria-hidden="true"></i>
                    </div>-->
        <div [ngClass]="{'link-flag-icon': project.linkFlag,
                'inuring-flag-icon': project.postInuredFlag,
                'standard-flag-icon': !project.linkFlag && !project.postInuredFlag}"
             *ngIf="project.projectType !== 'fac'"
             class="project-header-icon d-flex justify-content-center align-items-center">
          <i *ngIf="!project.postInuredFlag"
             [className]="project.linkFlag ? 'icon-link_24px' : 'icon-assignment_24px'"></i>
          <i *ngIf="project.postInuredFlag" class="fa fa-code-fork"></i>
        </div>
        <div *ngIf="project.projectType === 'fac'" [ngClass]="{'standard-flag-icon': project.projectFacSource === 'manual',
        'standard-fac-flag-icon': project.projectFacSource === 'specific'}"
             class="project-header-icon d-flex justify-content-center align-items-center">
          <i *ngIf="project.projectFacSource === 'manual'" class='icon-assignment_24px'></i>
          <i *ngIf="project.projectFacSource === 'specific'" class='icon-copy'></i>
        </div>
        <div class="project-header-title d-flex flex-column justify-content-center pl-3">
          <div class="d-flex justify-content-between" *ngIf="project.projectType === 'fac'">
            <div class="d-flex flex-column">
              <span>{{project?.name | trimFormat}}</span>
              <span>{{project?.projectId | trimFormat}}</span>
            </div>
            <div class="d-flex align-items-center">
              <div [ngStyle]="{'background': setBackground(project?.carStatus)}"
                   class="car-status-temp">{{project?.carStatus}}</div>
            </div>
          </div>
          <div class="d-flex flex-column" *ngIf="project.projectType !== 'fac'">
            <span>{{project?.projectName}}</span>
            <span>{{project?.projectId}}</span>
          </div>
        </div>
        <div class="icon-card-wrapper">
          <nz-dropdown [nzTrigger]="'hover'" [nzPlacement]="'bottomRight'">
            <a style="max-height: 28px;display: flex;" nz-dropdown>
              <i class="icon-menu_24px"></i>
            </a>
            <ul nz-menu style="font-size: 12px">
              <li nz-menu-item class="contextMenu border-bottom"><i class="icon-archive"></i>Archive</li>
              <li nz-menu-item class="contextMenu border-bottom"
                  *ngIf="project.projectType === 'treaty' || status === 'treaty'"
                  (click)="delete({projectId: project?.projectId ,projectIndex: i, project: project})"><i
                class="icon-trash-alt"></i>Delete
              </li>
              <li nz-menu-item (click)="edit({project: project})" class="contextMenu"><i class="icon-edit"></i>Edit
                Project Properties
              </li>
            </ul>
          </nz-dropdown>
          <!--                        <i class="icon-ellipsis-h"></i>
                                  <i *ngIf="project?.selected" class="icon-check_24px"></i>
                                  <span *ngIf="!project?.selected"></span>-->
        </div>
      </div>
      <div class="project-progress d-flex justify-content-center align-items-center">
        <div class="project-flag">
          <div style="margin-right: 3px">
            <hr>
            <span class="steper-icon"></span>
          </div>
          <span>Imported</span>
        </div>
        <div class="project-flag">
          <div style="margin-right: 3px">
            <hr>
            <span class="steper-icon"></span>
          </div>
          <span>Published to Pricing</span>
        </div>
        <div class="project-flag">
          <div style="margin-right: 3px">
            <hr>
            <span class="steper-icon"></span>
          </div>
          <span>Priced</span>
        </div>
        <div class="project-flag">
          <div style="margin-right: 2px">
            <hr>
            <span class="steper-icon"></span>
          </div>
          <span>Accumulated</span>
        </div>
      </div>
      <div class="project-kpi border-top d-flex">
        <div style="flex:1" class="border-right py-2 px-3 d-inline-flex flex-column project-component">
          <i style="font-size: 2.6em; color: rgba(0,0,0,0.3)" class="icon-location_searching_24px mb-1"></i>
          <span class="project-kpi-span">Region Perils</span>
          <span class="project-kpi-span"><b>{{project?.regionPerilSum || 0}}</b></span>
        </div>
        <div style="flex:1" class="border-right py-2 px-3 d-inline-flex flex-column project-component">
          <i style="font-size: 2.6em; color: rgba(0,0,0,0.3)" class="icon-adjust-half mb-1"></i>
          <span class="project-kpi-span">Exp</span>
          <span class="project-kpi-span"><b>-</b></span>
        </div>
        <div style="flex:1" class="border-right py-2 px-3 d-inline-flex flex-column project-component">
          <i style="font-size: 2.6em; color: rgba(0,0,0,0.3)" class="icon-box mb-1"></i>
          <span class="project-kpi-span">PLT</span>
          <span class="project-kpi-span"><b>{{project?.pltThreadSum || 0}}</b></span>
        </div>
        <div style="flex:1" class="border-right py-2 px-3 d-inline-flex flex-column project-component">
          <i style="font-size: 2.6em; color: rgba(0,0,0,0.3)" class="icon-note mb-1"></i>
          <span class="project-kpi-span">Published</span>
          <span class="project-kpi-span"><b>{{project?.xactSum || 0}}</b></span>
        </div>
        <div style="flex:1" class="border-right py-2 px-3 d-inline-flex flex-column project-component">
          <i style="font-size: 2.6em; color: rgba(0,0,0,0.3)" class="icon-dollar-alt mb-1"></i>
          <span class="project-kpi-span">Pricing</span>
          <span class="project-kpi-span"><b>-</b></span>
        </div>
        <div style="flex:1" class="py-2 px-3 d-inline-flex flex-column project-component">
          <i style="font-size: 2.6em; color: rgba(0,0,0,0.3)" class="icon-focus-add mb-1"></i>
          <span class="project-kpi-span">Accum</span>
          <span class="project-kpi-span"><b>-</b></span>
        </div>
      </div>
      <div class="project-kpi-details pb-3">
        <div class="project-kpi-details-title flex-align-Ws" *ngIf="project?.projectType !== 'fac'">
          <i *ngIf="project.sourceWsName" class="icon-link_24px"></i>
          <span *ngIf="project.sourceWsName" class="source-Ws">{{project?.sourceWsId}}-{{project?.sourceWsName}}</span>
          <a class="project-link" *ngIf="project.sourceWsName">|&nbsp;&nbsp; {{project?.sourceProjectName}}
            [{{project?.sourceProjectId}}]</a>
        </div>
        <div style="height: 65px; padding: 0" class="d-flex flex-column project-kpi-details-title"
             *ngIf="project.projectType === 'fac'">
          <div style="padding: 6px 0;" class="d-flex border-bottom">
            <span class="field-car-status">CAR ID :</span>
            <span class="font-weight-bold">{{project?.id | parseId}}</span>
          </div>
          <div style="padding: 6px 0;" class="d-flex">
            <span class="field-car-status">UW Analysis :</span>
            <span class="font-weight-bold">{{project?.uwAnalysis}}</span>
          </div>
        </div>
        <div class="project-kpi-details-title" *ngIf="status === 'treaty'">
          {{project?.projectDescription}}
        </div>
        <div class="border-top d-flex project-kpi-details-content">
          <span class="pl-4 dt-11" style="flex:1;	letter-spacing: 0.08px;	line-height: 32px;">Created</span>
          <span class="pr-4 dt-11 project-kpi-creat-wrap">{{project?.createdBy === '1' ? 'Nathalie Dulac' : project?.createdBy}}</span>
          <span class="text-center dt-11"
                style="flex:1;color: rgba(0,0,0,0.87);  letter-spacing: 0.08px; line-height: 32px;">{{project?.creationDate | date:'dd/MM/yyyy'}}</span>
        </div>
        <div class="border-top d-flex project-kpi-details-content">
          <span class="pl-4 dt-11" style="flex:1;letter-spacing: 0.08px;	line-height: 32px;">Last Modified</span>
          <span class="pr-4 dt-11 project-kpi-creat-wrap">{{project?.createdBy === '1' ? 'Nathalie Dulac' : project?.createdBy}}</span>
          <span class="text-center dt-11"
                style="flex:1;color: rgba(0,0,0,0.87);letter-spacing: 0.08px; line-height: 32px;">{{project?.dueDate | date:'dd/MM/yyyy'}}</span>
        </div>
        <div *ngIf="status === 'treaty'" class="border-top d-flex project-kpi-details-content">
          <span class="pl-4 dt-11" style="flex:1;letter-spacing: 0.08px;	line-height: 32px;">Assigned Analyst</span>
          <span class="pr-4 dt-11 project-kpi-creat-wrap">Nathalie Dulac</span>
          <span class="text-center dt-11" style="flex:1;color: rgba(0,0,0,0.87);letter-spacing: 0.08px; line-height: 32px;"></span>
        </div>
      </div>
    </div>
  </div>
</div>


<!--  </div>-->

<!--</cdk-virtual-scroll-viewport>-->
