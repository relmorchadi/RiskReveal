<p-table *ngIf="!virtualScroll"
         [columns]="tableColumn"
         [value]="listOfData | tableSortAndFilter : [sortData, FilterData]"
         [resizableColumns]="true"
         [columnResizeMode]="'expand'"
         [scrollable]="true"
         [scrollHeight]="tableHeight"
         [responsive]="true"
         (onRowSelect)="rowSelect($event)"
         (onRowUnselect)="rowUnselect($event)"
         [(selection)]="selectedRow"
         class="table-ngPrime"
>
  <ng-template pTemplate="colgroup" let-columns>
    <colgroup>
      <col *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
    </colgroup>
  </ng-template>
  <ng-template pTemplate="header" let-columns>
    <tr>
      <th *ngFor="let col of columns" pResizableColumn [style.width]="col?.width + 'px'">
        <span *ngIf="col?.display"
              style="display:flex ;justify-content: space-between ; white-space:nowrap ;text-overflow: ellipsis ">
          {{col?.header}}
          <ng-container *ngIf="col?.sorted" [ngSwitch]="sortData[col?.field]">
              <i *ngSwitchCase="'asc'" class="icon-keyboard_arrow_up_24px"
                 (click)="sortChange(col?.field,sortData[col.field])" style="font-size: 1.4em;"></i>
              <i *ngSwitchCase="'desc'" class="icon-keyboard_arrow_down_24px"
                 (click)="sortChange(col?.field,sortData[col.field])" style="font-size: 1.4em;"></i>
              <i *ngSwitchDefault class="icon-direction" (click)="sortChange(col?.field,sortData[col.field])"
                 style="font-size: 1.4em;"></i>
            </ng-container>

        </span>
        <!--        (input)="filterCol($event.target.value, col?.filterParam)"-->
        <div class="search-bar-table" *ngIf="col?.filtered">
          <i class="fa fa-search" style="margin: 6px 4px 4px 6px"></i>
          <input *ngIf="col?.header?.length > 0" pInputText type="text"
                 (input)="filter(col?.field, $event.target.value)" [ngModel]="FilterData[col?.field]">
        </div>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
    <tr
      (dblclick)="doubleClickRow(rowData)"
      [ngClass]="{'active_contract_item': rowData?.selected, 'selected_contract_item': rowData === currentSelectedItem}">
      <ng-container *ngFor="let col of columns">
        <ng-container [ngSwitch]="col?.type">
          <td *ngSwitchCase="'checkbox'" class="ui-resizable-column">
            <div style="display:flex">
              <label nz-checkbox [(ngModel)]="rowData.selected" (ngModelChange)="uncheckRow()"></label>
            </div>
          </td>
          <!--          <td *ngSwitchCase="'icon'" class="ui-resizable-column"-->
          <!--              (dblclick)="doubleClickRow(rowData)"-->
          <!--              (click)="selectRow(rowData, i)">-->
          <!--            <div *ngIf="col?.type !== 'favStatus' && col?.type !== 'rawStatus'" style="display:flex">-->
          <!--              <i *ngIf="col?.type === 'date'" class="icon-calendar-alt"></i>-->
          <!--              <span [title]="rowData[col?.field]" class="text-wrapper">{{rowData[col?.field]}}</span>-->
          <!--            </div>-->
          <!--            <div class="fav-status-info" (click)="updateFavValue(rowData)" *ngIf="col?.type === 'favStatus'">-->
          <!--              <i *ngIf="!rowData[col?.field]" class="icon-star_outline_24px"></i>-->
          <!--              <i *ngIf="rowData[col?.field]" class="icon-star_24px"></i>-->
          <!--            </div>-->
          <!--            <ng-container *ngIf="col?.type === 'rawStatus'">-->
          <!--              <span class="new-item" *ngIf="rowData[col.field] === 'New'">New</span>-->
          <!--              <span class="canceled-item" *ngIf="rowData[col.field] === 'Canceled'">Canceled</span>-->
          <!--              <span class="superseeded-item" *ngIf="rowData[col.field] === 'SuperSeeded'">SuperSeeded</span>-->
          <!--              <span class="current-item" *ngIf="rowData[col.field] === 'In Progress'">In Progress</span>-->
          <!--              <span class="completed-item" *ngIf="rowData[col.field] === 'Completed'">Completed</span>-->
          <!--            </ng-container>-->
          <!--          </td>-->
          <td *ngSwitchCase="'icon'" [style.width]="col?.width + 'px'" class="ui-resizable-column">
            <div style="display:flex">
              <i (click)="handler(col, rowData)" [ngClass]="col?.class"
                 style="font-weight: bold; font-size: 1.2rem;"></i>
            </div>
          </td>
          <td *ngSwitchCase="'multi-icons'" class="ui-resizable-column">
            <div style="display:flex; justify-content: space-evenly;">
              <i *ngFor="let icon of col?.icons" (click)="icon.handler(col, rowData)" [ngClass]="icon?.class"
                 style="font-weight: bold; font-size: 1.2rem;"></i>
            </div>
          </td>
          <td *ngSwitchCase="'date'" class="ui-resizable-column">{{rowData[col?.field] | date:'dd/MM/yyyy'}} </td>
          <td *ngSwitchCase="'status'" class="ui-resizable-column">
            <div style="display:flex; justify-content: center">
              <span *ngIf="rowData[col?.field]=='Done'; else warning"
                    style="height: 20px; width: 20px;border-radius: 15px; background-color: #7ED321"></span>
              <ng-template #warning>
                <i style="font-weight: bold; font-size: 1.2rem; color: #FDB62E" class="icon-warning_amber_24px"></i>
              </ng-template>
            </div>
          </td>
          <td *ngSwitchDefault class="ui-resizable-column">{{rowData[col?.field]}}</td>

        </ng-container>

      </ng-container>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage" let-columns>
    <tr>
      <td [attr.colspan]="columns.length">
        No records found
      </td>
    </tr>
  </ng-template>
</p-table>
