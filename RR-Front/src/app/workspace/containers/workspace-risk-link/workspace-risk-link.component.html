<app-left-menu></app-left-menu>
<div class="workspace-main-content">
  <!--   <button class="mx-4 plus-btn d-flex justify-content-center align-items-center"
             nz-button nzType="primary" nzSize="large" nzShape="circle">
       <i style="color: white;" nz-icon type="plus" theme="outline"></i>
     </button>
     <ul class="mt-md-3 workspace-info-menu d-flex pl-5" style="background: transparent;color:rgba(255,255,255,0.6);"  nz-menu [nzMode]="'horizontal'">
       <li style="font-size: 14.22px;	font-weight: 500;" nz-menu-item>All projects <i style="margin-left:10px;color:rgb(115, 115, 118);" class="icon-menu_24px"></i></li>
       <li style="font-size: 14.22px;	font-weight: 500;" nz-menu-item>PLT's </li>
       <li style="font-size: 14.22px;	font-weight: 500;" nz-menu-item>Scope Of Completeness </li>
       <li style="font-size: 14.22px;	font-weight: 500;" nz-menu-item>Activity </li>
     </ul>-->
  <button class="mx-4 pine-btn  d-flex justify-content-center align-items-center"
          nz-button nzType="primary" nzSize="default" nzShape="circle">
    <i style="color: #16617a;" nz-icon theme="outline">
      <i class="icon-map-pin-alt"></i>
    </i>
  </button>
  <div class="app-wrap">
    <div class="header-wrap">
      <span class="header-wrap-text">Project P - 00723</span>
      <hr class="col-xs-24">
    </div>
    <div class="body-wrap">
      <div class="body-wrap-header">
        <div class="body-wrap-header-text">
          <!--          <span class="body-wrap-header-text-title">TREATY</span>-->
          <span class="body-wrap-header-text-subtitle">RiskLink Import</span>
        </div>
      </div>
      <div class="body-wrap-dropDowns">
        <nz-dropdown [nzTrigger]="'click'">
          <div class="dropdown-wrap" nz-dropdown>
            <div class="dropdown-wrap-title">
              <span class="dropdown-title">RMS Instance</span>
              <span class="dropdown-item-selected" *ngIf="state.financialValidator.rmsInstance.selected">
                {{state.financialValidator.rmsInstance.selected}}
              </span>
            </div>
            <div class="dropdown-icon">
              <i nz-icon type="down"></i>
            </div>
          </div>
          <ul nz-menu>
            <li nz-menu-item (click)="changeFinancialValidator('rmsInstance', item)"
                *ngFor="let item of state.financialValidator.rmsInstance.data">{{item}}</li>
          </ul>
        </nz-dropdown>
        <nz-dropdown [nzTrigger]="'click'">
          <div class="dropdown-wrap" nz-dropdown>
            <div class="dropdown-wrap-title">
              <span class="dropdown-title">Financial Perspective ELT</span>
              <span class="dropdown-item-selected" *ngIf="state.financialValidator.financialPerspectiveELT.selected">
                {{state.financialValidator.financialPerspectiveELT.selected}}
              </span>
            </div>
            <div class="dropdown-icon">
              <i nz-icon type="down"></i>
            </div>
          </div>
          <ul nz-menu>
            <li nz-menu-item (click)="changeFinancialValidator('financialPerspectiveELT', item)"
                *ngFor="let item of state.financialValidator.financialPerspectiveELT.data">{{item}}</li>
          </ul>
        </nz-dropdown>
<!--        <nz-dropdown [nzTrigger]="'click'">
          <div class="dropdown-wrap" nz-dropdown>
            <div class="dropdown-wrap-title">
              <span class="dropdown-title">Financial Perspective EPMetrics</span>
              <span class="dropdown-item-selected" *ngIf="state.financialValidator.financialPerspectiveEPM.selected">
                {{state.financialValidator.financialPerspectiveEPM.selected}}
              </span>
            </div>
            <div class="dropdown-icon">
              <i nz-icon type="down"></i>
            </div>
          </div>
          <ul nz-menu>
            <li nz-menu-item (click)="changeFinancialValidator('financialPerspectiveEPM', item)"
                *ngFor="let item of state.financialValidator.financialPerspectiveEPM.data">{{item}}</li>
          </ul>
        </nz-dropdown>-->
        <nz-dropdown [nzTrigger]="'click'">
          <div class="dropdown-wrap" nz-dropdown>
            <div class="dropdown-wrap-title">
              <span class="dropdown-title">Target Currency</span>
              <span class="dropdown-item-selected" *ngIf="state.financialValidator.targetCurrency.selected">
                {{state.financialValidator.targetCurrency.selected}}
              </span>
            </div>
            <div class="dropdown-icon">
              <i nz-icon type="down"></i>
            </div>
          </div>
          <ul nz-menu>
            <li nz-menu-item (click)="changeFinancialValidator('targetCurrency', item)"
                *ngFor="let item of state.financialValidator.targetCurrency.data">{{item}}</li>
          </ul>
        </nz-dropdown>
      </div>
      <div class="body-wrap-body">
        <div class="body-wrapper">
          <div class="body-wrapper-header">
            <div class="body-wrapper-header-left">
              <hr>
              <div>Select EDM & RDM</div>
            </div>
            <div class="body-wrapper-header-middle">
              <div *ngIf="state.collapse.collapseHead" class="body-wrapper-search" clickOutside (clickOutside)="closeDropdown()"
                   [ngClass]="{'body-wrapper-search-active': displayDropdownRDMEDM ,'body-wrapper-search-display': displayListRDMEDM}">
                <div class="search-bar"
                     [ngClass]="{'search-bar-active': displayDropdownRDMEDM, 'search-bar-display': displayListRDMEDM}">
                  <i class="search-bar-icon-search" (click)="displayDropdownRDMEDM = !displayDropdownRDMEDM" nz-icon nzType="search"
                     nzTheme="outline"></i>
                  <div class="search-bar-text"
                       [ngStyle]="{'display': displayDropdownRDMEDM ? 'none' : 'flex'}"
                       (click)="displayDropdownRDMEDM = !displayDropdownRDMEDM" *ngIf="!displayListRDMEDM">Select EDM & RDM
                  </div>
                  <input placeholder="Select EDM & RDM"
                         [ngStyle]="{'display': displayDropdownRDMEDM ? 'flex' : 'none'}"
                         (input)="onInputSearch($event)">
                  <div class="search-bar-text displayed-info"
                       [ngStyle]="{'display': displayDropdownRDMEDM ? 'none' : 'flex'}"
                       (click)="displayDropdownRDMEDM = !displayDropdownRDMEDM" *ngIf="displayListRDMEDM">
                    <span class="search-bar-text-title">EDM & RDM</span>
                    <span class="search-bar-text-subtitle">Add EDM & RDM</span>
                  </div>
                  <i class="search-bar-icon-down" (click)="displayDropdownRDMEDM = !displayDropdownRDMEDM" nz-icon nzType="down"
                     nzTheme="outline"></i>
                </div>
                <div class="search-bar-result" *ngIf="displayDropdownRDMEDM">
                  <div class="search-bar-result-icon">
                    <i style="font-size: 1.6em; margin-right:15px; cursor:pointer" nz-tooltip nzTitle="Refresh"
                       (click)="refreshAll()" nzPlacement="bottom" class="icon-refresh"></i>
                    <i style="font-size: 1.6em; margin-right:15px; cursor:pointer" nz-tooltip nzTitle="Select All"
                       (click)="selectAll()" nzPlacement="bottom" class="icon-focus-add"></i>
                    <i style="font-size: 1.6em; cursor:pointer" nz-tooltip nzTitle="Unselect All"
                       (click)="unselectAll()" nzPlacement="bottom" class="icon-minus-square"></i>
                  </div>
                  <nz-tabset class="a-tab-minitab">
                    <nz-tab nzTitle="EDM & RDM">
                      <div class="search-bar-result-list">
                        <p-virtualScroller [value]="dataList(state.listEdmRdm.data)" scrollHeight="305px" [itemSize]="30"  [rows]="state.listEdmRdm.numberOfElement"
                                           [lazy]="true" (onLazyLoad)="loadItemsLazy($event)" [totalRecords]="state.listEdmRdm.totalNumberElement">
                          <ng-template let-item pTemplate="item">
                            <div class="poover-menu-item" (click)="toggleItems(item)" [ngClass]="{'poover-menu-item-active': item?.selected || item?.scanned}">
                              <label nz-checkbox (ngModelChange)="toggleItems(item)" style="margin-right: 5px" [ngModel]="item.selected"></label>
                              <span  class="logo" *ngIf="item?.type === 'rdm'" style="background: #03DAC4">R</span>
                              <span  class="logo" *ngIf="item?.type === 'edm'" style="background: #0700CF">E</span>
                              <span>{{item?.name}}</span>
                            </div>
                          </ng-template>
                          <ng-template let-car pTemplate="loadingItem">
                            <div class="loading-text"></div>
                          </ng-template>
                        </p-virtualScroller>
                      </div>
                      <div class="search-bar-result-button">
                        <button (click)="selectedItem()" class="a-buttons-contained">ADD</button>
                      </div>
                    </nz-tab>
                    <nz-tab nzTitle="EDM">
                      <div class="search-bar-result-list">
                        <ul>
                          <ng-container *ngFor="let item of dataList(state.listEdmRdm.data)">
                            <li *ngIf="item?.type === 'edm'" class="poover-menu-item" (click)="toggleItems(item)"
                                [ngClass]="{'poover-menu-item-active': item?.selected || item?.scanned}">
                              <label nz-checkbox (ngModelChange)="toggleItems(item)" style="margin-right: 5px" [ngModel]="item.selected"></label>
                              <span class="logo" style="background: #0700CF">E</span>
                              <span>{{item?.name}}</span>
                            </li>
                          </ng-container>
                        </ul>
                      </div>
                      <div class="search-bar-result-button">
                        <button (click)="selectedItem()" class="a-buttons-contained">ADD</button>
                      </div>
                    </nz-tab>
                    <nz-tab nzTitle="RDM">
                      <div class="search-bar-result-list">
                        <ul>
                          <ng-container *ngFor="let item of dataList(state.listEdmRdm.data)">
                            <li *ngIf="item?.type === 'rdm'" class="poover-menu-item" (click)="toggleItems(item)"
                                [ngClass]="{'poover-menu-item-active': item?.selected || item?.scanned}">
                              <label nz-checkbox (ngModelChange)="toggleItems(item)" style="margin-right: 5px" [ngModel]="item.selected"></label>
                              <span class="logo" style="background: #03DAC4">R</span>
                              <span>{{item?.name}}</span>
                            </li>
                          </ng-container>
                        </ul>
                      </div>
                      <div class="search-bar-result-button">
                        <button (click)="selectedItem()" class="a-buttons-contained">ADD</button>
                      </div>
                    </nz-tab>
                  </nz-tabset>
                </div>
              </div>
            </div>
            <div class="body-wrapper-header-right" style="flex: inherit">
              <!--              <button *ngIf="collapsehead"  nz-button> ADVANCED</button>-->
              <i *ngIf="state.collapse.collapseHead" (click)="changeCollapse('collapseHead')" class="icon-keyboard_arrow_up_24px"></i>
              <i *ngIf="!state.collapse.collapseHead" (click)="changeCollapse('collapseHead')" class="icon-keyboard_arrow_down_24px"></i>
            </div>
          </div>
        </div>
        <div class="body-main-wrapper" style="" *ngIf="displayListRDMEDM">
          <div class="left" *ngIf="state.collapse.collapseHead">
            <div class="body-wrapper">
              <div class="body-wrapper-header">
                <div class="body-wrapper-header-left">
                  <span>Selected EDMs & RDMs</span>
                </div>
              </div>
              <div class="list-items" *ngIf="displayListRDMEDM">
                <span class="list-items-title">EDM</span>
                <ul>
                  <ng-container *ngFor="let itemsE of dataList(state.listEdmRdm.selectedListEDMAndRDM)">
                    <li *ngIf="itemsE.type === 'edm'" class="poover-menu-item"
                        [ngClass]="{'poover-menu-item-active': itemsE.selected}">
                      <span (click)="toggleItemsListRDM(itemsE)" class="logo" style="background: #0700CF;">E</span>
                      <span (click)="toggleItemsListRDM(itemsE)" [title]="itemsE.name"
                            class="text">{{itemsE?.name}}</span>
                      <ng-container *ngIf="itemsE?.scanned">
                        <span class="reference">{{itemsE?.Reference}}</span>
                        <!--<i class="logo-right" [ngClass]="{'icon-check_24px': itemsE.selected}"></i>-->
                        <i (click)="scanItem(itemsE)" class="logo-right icon-loop_24px"></i>
                      </ng-container>
                      <ng-container *ngIf="!itemsE?.scanned">
                        <span class="loading">Scanning</span>
                        <i style="color: #0CB79B" class="logo-right icon-loop_24px"></i>
                      </ng-container>
                    </li>
                  </ng-container>
                </ul>
              </div>
              <div class="list-items" *ngIf="displayListRDMEDM">
                <span class="list-items-title">RDM</span>
                <ul>
                  <ng-container *ngFor="let itemsR of dataList(state.listEdmRdm.selectedListEDMAndRDM)">
                    <li *ngIf="itemsR.type === 'rdm'" class="poover-menu-item"
                        [ngClass]="{'poover-menu-item-active': itemsR.selected}">
                      <span (click)="toggleItemsListRDM(itemsR)" class="logo" style="background: #03DAC4">R</span>
                      <span (click)="toggleItemsListRDM(itemsR)" [title]="itemsR?.name"
                            class="text">{{itemsR?.name}}</span>
                      <ng-container *ngIf="itemsR?.scanned">
                        <span class="reference">{{itemsR?.Reference}}</span>
                        <i (click)="scanItem(itemsR)" class="logo-right icon-loop_24px"></i>
                      </ng-container>
                      <ng-container *ngIf="!itemsR?.scanned">
                        <span class="loading">Scanning</span>
                        <i style="color: #0CB79B" class="logo-right icon-loop_24px"></i>
                      </ng-container>
                    </li>
                  </ng-container>
                </ul>
              </div>
            </div>
          </div>
          <div class="right" *ngIf="state.display.displayTable && state.collapse.collapseHead">
            <div class="body-wrapper">
              <div class="body-wrapper-header">
                <div class="body-wrapper-header-left">
                  <span *ngIf="state.selectedEDMOrRDM === 'rdm'">Select Analysis For Import</span>
                  <span *ngIf="state.selectedEDMOrRDM === 'edm'">Select Portfolio For Import</span>
                </div>
                <div class="body-wrapper-header-right">
                  <i class="icon-filter" (click)="filterModalVisibility = true"></i>
                  <nz-modal [(nzVisible)]="filterModalVisibility" [nzTitle]="titleModal"
                            (nzOnCancel)="handleCancel()"
                            [nzFooter]="footerModal">
                    <div class="input-group-modal">
                      <input placeholder="Portfolio ID" class="a-textfield-mini input-wrapper" >
                      <div class="radio-wrapper default-radio">
                        <span>AGG/DET</span>
                        <nz-radio-group [(ngModel)]="radioValue">
                          <label nz-radio nzValue="all">All</label>
                          <label nz-radio nzValue="agg">AGG</label>
                          <label nz-radio nzValue="det">DET</label>
                        </nz-radio-group>
                      </div>
                      <input placeholder="Number" class="a-textfield-mini input-wrapper" >
                      <input placeholder="Name" class="a-textfield-mini input-wrapper" >
                      <input placeholder="Description" class="a-textfield-mini input-wrapper" >
                    </div>
                    <ng-template #titleModal>
                      <h6>Portfolio Filter Criteria</h6>
                    </ng-template>
                    <ng-template #footerModal>
                      <div class="modal-footer-wrapper">
                        <button class="button-no-outline-disabled">CLEAR</button>
                        <button class="a-buttons-contained">APPLY</button>
                      </div>
                    </ng-template>
                  </nz-modal>
                  <button (click)="linkingModalVisibility = true" class="a-buttons-outlined">LINKING</button>
                  <nz-modal [(nzVisible)]="linkingModalVisibility" [nzTitle]="titleModalLinking"
                            (nzOnCancel)="handleCancel()"
                            [nzFooter]="null">
                    <div class="modal-linking-wrapper">
                      <div class="modal-linking-head">
                        <div class="modal-l-h-title">
                          <span class="modal-l-h-span">Associate</span>
                        </div>
                        <div class="modal-l-h-body">
                          <ul>
                            <ng-container *ngFor="let itemsE of dataList(state.listEdmRdm.selectedListEDMAndRDM)">
                              <li *ngIf="itemsE.type === 'edm'" class="popover-menu-item"
                                  [ngClass]="{'popover-menu-item-active': itemsE.selected}">
                                <label nz-checkbox [(ngModel)]="itemsE.selected">
                                  <span (click)="toggleItemsListRDM(itemsE)" class="logo" style="background: #0700CF;">E</span>
                                  <span (click)="toggleItemsListRDM(itemsE)" [title]="itemsE.name"
                                        class="text">{{itemsE?.name}}</span>
                                </label>
                              </li>
                            </ng-container>
                          </ul>

                          <ul>
                            <ng-container *ngFor="let itemsR of dataList(state.listEdmRdm.selectedListEDMAndRDM)">
                              <li *ngIf="itemsR.type === 'rdm'" class="popover-menu-item"
                                  [ngClass]="{'popover-menu-item-active': itemsR.selected}">
                                <label nz-checkbox [(ngModel)]="itemsR.selected">
                                  <span (click)="toggleItemsListRDM(itemsR)" class="logo" style="background: #03DAC4">R</span>
                                  <span (click)="toggleItemsListRDM(itemsR)" [title]="itemsR?.name"
                                        class="text">{{itemsR?.name}}</span>
                                </label>
                              </li>
                            </ng-container>
                          </ul>
                        </div>
                        <div class="modal-l-h-button">
                          <button class="a-buttons-outlined">ASSOCIATE</button>
                        </div>
                      </div>
                      <div class="modal-linking-body">
                        <nz-tabset class="tabs-standard-top-secondary">
                          <nz-tab nzTitle="Association 1">
                            <div class="modal-tab-content-wrapper">
                              <div class="modal-l-b-header">
                                <div class="popover-menu-item item-popover">
                                  <span  class="logo" style="background: #03DAC4">R</span>
                                  <span>4</span>
                                  <span class="text">AA2012_SyntheticCurve_R</span>
                                </div>
                                <div class="popover-menu-item item-popover">
                                  <span  class="logo" style="background: #0700CF;">E</span>
                                  <span>4</span>
                                  <span class="text">AA2012_SyntheticCurve_E</span>
                                </div>
                              </div>
                              <div class="modal-l-b-body">
                                <div class="modal-l-b-left">
                                  <div class="modal-l-b-card">
                                    <div>
                                      <span>EDM Portfolio</span>
                                      <div class="tab-search-input">
                                        <i class="icon-search_24px"></i>
                                        <input class="input-search"/>
                                      </div>
                                    </div>
                                    <ul>
                                      <ng-container *ngFor="let itemsR of dataList(state.listEdmRdm.selectedListEDMAndRDM)">
                                        <li *ngIf="itemsR.type === 'rdm'" class="popover-menu-item"
                                            [ngClass]="{'popover-menu-item-active': itemsR.selected}">
                                          <label nz-checkbox [(ngModel)]="itemsR.selected">
                                            <span (click)="toggleItemsListRDM(itemsR)" class="logo" style="background: #C38FFF">P</span>
                                            <span (click)="toggleItemsListRDM(itemsR)" [title]="itemsR?.name"
                                                  class="text">{{itemsR?.name}}</span>
                                          </label>
                                        </li>
                                      </ng-container>
                                    </ul>
                                  </div>
                                  <div class="modal-l-b-card">
                                    <div>
                                      <span>RDM Analysis</span>
                                      <div class="tab-search-input">
                                        <i class="icon-search_24px"></i>
                                        <input class="input-search"/>
                                      </div>
                                    </div>
                                    <ul>
                                      <ng-container *ngFor="let itemsR of dataList(state.listEdmRdm.selectedListEDMAndRDM)">
                                        <li *ngIf="itemsR.type === 'rdm'" class="popover-menu-item"
                                            [ngClass]="{'popover-menu-item-active': itemsR.selected}">
                                          <label nz-checkbox [(ngModel)]="itemsR.selected">
                                            <span (click)="toggleItemsListRDM(itemsR)" class="logo" style="background: #009575">A</span>
                                            <span (click)="toggleItemsListRDM(itemsR)" [title]="itemsR?.name"
                                                  class="text">{{itemsR?.name}}</span>
                                          </label>
                                        </li>
                                      </ng-container>
                                    </ul>
                                  </div>
                                </div>
                                <div class="modal-l-b-right">
                                  <div class="modal-l-b-card"></div>
                                </div>
                              </div>
                            </div>
                          </nz-tab>
                          <nz-tab nzTitle="Association 2">
                            <div class="modal-tab-content-wrapper">
                              <div class="modal-l-b-header">

                              </div>
                              <div class="modal-l-b-body">
                                <div class="modal-l-b-left">

                                </div>
                                <div class="modal-l-b-right">

                                </div>
                              </div>
                            </div>
                          </nz-tab>
                        </nz-tabset>
                      </div>
                    </div>
                    <ng-template #titleModalLinking>
                      <h6>Associate & Link EDM & RDM</h6>
                    </ng-template>
                  </nz-modal>
                </div>
              </div>
              <div class="show-table">
                <p-table #dt [columns]="getScrollableCols()" [frozenColumns]="getFrozenCols()" [value]="getTableData()"
                         [scrollable]="true" scrollHeight="340px" frozenWidth="240px">
                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                    </colgroup>
                  </ng-template>
                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <th *ngFor="let col of columns">
                        <div *ngIf="col.header !== 'selected'">{{col.header}}</div>
                        <div class="search-bar-table"
                             *ngIf="col.header !== 'selected' && col.header !== 'id'">
                          <i class="fa fa-search" style="margin: 6px 4px 4px 6px"></i>
                          <input pInputText type="text"
                                 (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">
                        </div>
                      </th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
                    <tr >
                      <td *ngFor="let col of columns"
                          [ngClass]="{'selected-item': rowData?.selected}"
                          [ngStyle]="{'background-color': rowData['AlreadyImported'] ? '#EBEEFB' : '#FFF'}">
                        <div style=" display: flex;" *ngIf="col.type === 'select'">
                          <label nz-checkbox (ngModelChange)="checkRow($event, rowData)" [ngModel]="rowData.selected"></label>
                        </div>
                        <div class="text-data" (click)="selectRows(rowData, i)" *ngIf="col.type === 'text'">{{rowData[col.field]}}</div>
                        <div class="text-data" (click)="selectRows(rowData, i)" *ngIf="col.type === 'date'">{{rowData[col.field] | date:'dd/MM/yyyy'}}</div>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
              <div class="import-button" (click)="displayImported()">
                <button class="a-buttons-contained">ADD TO BASKET</button>
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="body-wrap-body" *ngIf="state.display.displayImport">
        <div class="body-wrapper">
          <div class="body-wrapper-header">
            <div class="body-wrapper-header-left">
              <hr>
              <div>Exposure Summaries</div>
            </div>
            <div class="body-wrapper-header-right-summary">
              <button class="a-buttons-outlined" *ngIf="state.collapse.collapseResult"> ADVANCED</button>
              <div class="icon-drop">
                <i *ngIf="state.collapse.collapseResult" (click)="changeCollapse('collapseResult')"
                   class="icon-keyboard_arrow_up_24px"></i>
                <i  *ngIf="!state.collapse.collapseResult" (click)="changeCollapse('collapseResult')"
                    class="icon-keyboard_arrow_down_24px"></i>
              </div>
            </div>
          </div>
          <div class="summary-info" *ngIf="state.collapse.collapseResult">
            <table>
              <thead>
              <tr>
                <th style="width:2%"></th>
                <th style="width:3%">Status</th>
                <th style="width:4%">
                  ID
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:17%">
                  Number
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:14%">
                  Name
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <!--<th style="width:11%">
                  Exposed Location
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>-->
                <th style="width:11%">
                  Exposure Currency
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:10%">
                  Target Currency
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:8%">
                  Unit Multiplier
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:7%">
                  Proportion
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:5%">
                  EDM
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:2%"><i class="icon-menu_24px"></i></th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let items of summaryInfo">
                <th><i class="icon-loop_24px"></i></th>
                <th style="text-align: center">
                  <nz-progress [nzPercent]="items?.status" [ngClass]="{'hidden-text': items.status < 100 }"
                               [nzWidth]="20" nzType="circle"></nz-progress>
                </th>
                <th>{{items?.id}}</th>
                <th>{{items?.number}}</th>
                <th>{{items?.name}}</th>
                <!--<th>
                  <div class="state" [ngClass]="{'state-false': !items?.exposedLocation}"></div>
                </th>-->
                <th>{{items?.exposedCurrency}}</th>
                <th>{{items?.targetCurrency}}</th>
                <th>{{items?.unitMultiplier | number:'1.1-1'}}</th>
                <th>{{items?.proportion}}</th>
                <th>{{items?.EDM}}</th>
                <th><i class="icon-trash-alt"></i></th>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>


      <div class="body-wrap-body" *ngIf="state.display.displayImport">
        <div class="body-wrapper">
          <div class="body-wrapper-header">
            <div class="body-wrapper-header-left">
              <hr>
              <div>Analysis Results</div>
            </div>
            <div class="body-wrapper-header-right-summary">
              <button class="a-buttons-outlined" *ngIf="state.collapse.collapseAnalysis"> ADVANCED</button>
              <div class="icon-drop">
                <i *ngIf="state.collapse.collapseAnalysis"
                   (click)="changeCollapse('collapseAnalysis')" class="icon-keyboard_arrow_up_24px"></i>
                <i *ngIf="!state.collapse.collapseAnalysis" (click)="changeCollapse('collapseAnalysis')"
                   class="icon-keyboard_arrow_down_24px"></i>
              </div>
            </div>
          </div>
          <div class="summary-info" *ngIf="state.collapse.collapseAnalysis">
            <table>
              <thead>
              <tr>
                <th style="width:1%"></th>
                <th style="width:3%">Status</th>
                <th style="width:4%">
                  ID
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:17%">
                  Name
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:17%">
                  Description
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:7%">
                  Region Peril
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:10%">
                  Source Currency
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:9%">
                  Target Currency
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:9%">
                  ELT FIN PERSP
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:10%">
                  Occurrence Basis
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:8%">
                  Unit Miltiplier
                  <ng-container *ngTemplateOutlet="search"></ng-container>
                </th>
                <th style="width:2%"><i class="icon-menu_24px"></i></th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let items of resultsInfo">
                <th><i class="icon-loop_24px"></i></th>
                <th style="text-align: center">
                  <nz-progress [nzPercent]="items?.status" [ngClass]="{'hidden-text': items.status < 100 }"
                               [nzWidth]="20" nzType="circle"></nz-progress>
                </th>
                <th>{{items?.id}}</th>
                <th>{{items?.name}}</th>
                <th>{{items?.description}}</th>
                <th>{{items?.regionPeril}}</th>
                <th>{{items?.analysisCurrency}}</th>
                <th>{{items?.targetCurrency}}</th>
                <th>{{items?.ELT}}</th>
                <th>{{items?.occurrenceBasis}}</th>
                <th>{{items?.unitMultiplier | number:'1.1-1'}}</th>
                <th><i class="icon-trash-alt"></i></th>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>


      <div class="footer-section" *ngIf="state.display.displayImport">
        <div class="body-wrap-footer">
          <div class="body-wrap-footer-left">
            <nz-select nzShowSearch nzAllowClear [ngModel]="state.financialValidator.calibration.selected">
              <nz-option *ngFor="let op of state.financialValidator.calibration.data" [nzLabel]="op"
                         [nzValue]="op"></nz-option>
            </nz-select>
            <label nz-checkbox [ngModel]="state.checked.checkedARC">Publish to ARC</label>
            <label nz-checkbox [ngModel]="state.checked.checkedPricing">Publish for Pricing</label>
          </div>
          <div class="body-wrap-footer-right">
            <button nz-button>IMPORT</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<ng-template let-search='search' #search>
  <div class="search-bar-table">
    <i class="fa fa-search" style="margin: 6px 4px 4px 6px"></i>
    <input type="text">
    <!--(input)="filterCol(search,)-->
  </div>
</ng-template>
