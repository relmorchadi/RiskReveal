<div class="plt-browser-wrapper">
  <div class="a-app-wrapper">
    <div class="a-app-header">
      <h4>PLT Manager</h4>
    </div>
    <div class="my-tabs">
      <div #leftMenu>
        <div
          *ngIf="!collapsedTags"
          ngResizable
          [rzHandles]="'e,w'"
          (rzResizing)="resizing()"
          [rzMinWidth]="200"
          [rzMaxWidth]="350"
          style="position: relative;width: 280px;"
        >
          <app-plt-left-menu
            [leftMenuInputs]="leftMenuInputs"
            (actionDispatcher)="leftMenuActionDispatcher($event)"
          >
          </app-plt-left-menu>
          <i (click)="collapseLeftMenu();" *ngIf="!collapsedTags" class="icon-chevron_left_24px"
             style="font-size: 25px; cursor: pointer;position: absolute;top: 12px;right: 12px;"></i>
        </div>
        <div *ngIf="collapsedTags" class="a-closed-sidebar" style="position: relative;width: 37px;height: calc( 100vh - 280px);">
          <div class="collapseTags col-2" style="padding:15px 0px 0px 8px; position: absolute;">
            <i (click)="collapseLeftMenu()" class="icon-chevron_right_24px"
               style="font-size: 20px; cursor: pointer"></i>
          </div>
        </div>
      </div>
      <div class="tabset-right" [ngStyle]="{ 'width': leftIsHidden ? 'calc(100vw - ' + leftMenu.clientWidth +'px - 80px - 174px + 130px)' : 'calc(100vw - ' + leftMenu.clientWidth + 'px - 80px - 177px)'}">
        <div class="title-as-tab">
          <div class="div-title">
            <span class="title">PLTs</span>
          </div>
          <div class="right">
            <nz-dropdown [nzTrigger]="'click'" [nzPlacement]="'bottomRight'" >
              <a style="max-height: 28px;display: flex;" nz-dropdown>
                <i class="icon-settings_24px"></i>
              </a>
              <ul nz-menu style="font-size: 12px">

                <li nz-menu-item (click)="onResetFilter()" >Reset Filters</li>
                <li nz-menu-item (click)="onResetSort()" >Reset Sort</li>

                <li nz-menu-divider></li>

                <li nz-menu-item (click)="showDialog()" >Manage Columns</li>

                <li nz-menu-divider></li>

                <li nz-menu-item (click)="onExport()">Export</li>

                <li nz-menu-divider></li>

                <li nz-menu-item (click)="resetGrid()">Reset Grid</li>

              </ul>
            </nz-dropdown>
          </div>
        </div>
        <ag-grid-angular
                #agGrid
                style="width: 100%; height: 100%"
                id="myGrid"
                class="ag-theme-alpine"

                [modules]="modules"
                [frameworkComponents]="gridParams?.frameworkComponents"

                [rowModelType]="gridParams?.rowModelType"
                [immutableColumns]="gridParams?.immutableColumns"

                [columnDefs]="gridParams?.columnDefs"
                [defaultColDef]="gridParams?.defaultColDef"
                [autoGroupColumnDef]="gridParams?.autoGroupColumnDef"
                [sideBar]="gridParams?.sideBare"
                [allowDragFromColumnsToolPanel]="true"

                [rowSelection]="gridParams?.rowSelection"
                [groupSelectsChildren]="true"
                (selectionChanged)="gridParams.onSelectionChanged($event)"

                [multiSortKey]="'ctrl'"
                [animateRows]="true"
                [cacheBlockSize]="50"
                [getChildCount]="gridParams?.getChildCount"

                [getRowClass]="gridParams?.getRowClass"

                [getContextMenuItems]="gridParams?.getContextMenuItems"

                (columnResized)="saveNewColumnsState($event)"
                (columnPinned)="saveNewColumnsState(null)"
                (columnVisible)="saveNewColumnsState(null)"
                (columnMoved)="saveNewColumnsState($event)"
                (filterChanged)="saveNewColumnsState(null)"
                (sortChanged)="saveNewColumnsState(null)"

                (gridReady)="onGridReady($event)"
                (columnRowGroupChanged)="gridParams.onColumnRowGroupChanged($event)"
        ></ag-grid-angular>
      </div>
    </div>
  </div>
</div>

<app-plt-right-menu
  *ngIf="rightMenuInputs.visible"
  (actionDispatcher)="rightMenuActionDispatcher($event)"
  [Inputs]="rightMenuInputs"
></app-plt-right-menu>

<grid-col-manager *ngIf="isModalVisible"
               [visibleList]="visibleList"
               [availableList]="availableList"
               (actionDispatcher)="handleManageColumnsActions($event)">
</grid-col-manager>