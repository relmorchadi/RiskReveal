<app-left-menu></app-left-menu>
<div class="app-wrapper">
  <div class="app-header">
    <h4>Clone Workspace assets </h4>
<!--    <span class="subtitle-2">-->
<!--      {{ subTitle[activeSubTitle] }}-->
<!--    </span>-->
  </div>
  <div class="app-body">
    <ng-container [ngSwitch]="activeSubTitle">
      <div class="box-container" *ngSwitchCase="0" style="padding: 0 0;">
        <div class="box-item" style="background-color: #e5e9fa;width: 100%;">
          <div style="width: 780px;margin: auto;">
            <span class="subtitle-3">
              Summary of assets being cloned:
            </span>
            <div class="plts-detail-boxes">
              <div class="box">
                <div class="left" style="background-color: var(--primary-9);">
                  <i class="icon-assignment_24px"></i>
                </div>
                <div class="right">
                  <div class="regular1">Pre-Inured PLTs</div>
                  <span class="regular">12</span>
                </div>
              </div>
              <div class="box">
                <div class="left" style="background-color: var(--scor-peril-2);">
                  <i class="fa fa-code-fork" style="margin: 4px;"></i>
                </div>
                <div class="right">
                  <div class="regular1">Post-Inured PLTs</div>
                  <span class="regular">4</span>
                </div>
              </div>
              <div class="box">
                <div class="left" style="background-color: #33d0bb;">
                  <i class="icon-layer-group" style="margin: 4px;"></i>
                </div>
                <div class="right">
                  <div class="regular1">Inuring Packages</div>
                  <span class="regular">1</span>
                </div>
              </div>
              <div class="box">
                <div class="left" style="background-color: var(--primary-10);">
                  <i class="icon-assignment_24px"></i>
                </div>
                <div class="right">
                  <div class="regular1">Sources Projects</div>
                  <span class="regular">3</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="box-item" style="width: 780px;padding-bottom: 25px;">

          <span class="subtitle-4">
            Cloning from:
          </span>
          <div style="display: flex;flex-wrap: nowrap;" [ngStyle]="{'background-color': cloningFromItem ?  '#fff' : '#e5e9fa','justify-content': cloningFromItem ? 'unset' : 'center' }">
            <ng-container *ngIf="cloningFromItem">
              <div class="left-box">
                XL, INC, VOL, IND,ACC,AUTO CASCO | 2017 20769 | A.M.MA(BEL)
              </div>
              <div class="right-box">
                <button class="a-buttons-contained override">
                  <i class="icon-search_24px"></i>
                </button>
              </div>
            </ng-container>
            <ng-container *ngIf="!cloningFromItem">
              <button (click)="searchWorkSpaceModal=true" class="a-buttons-contained override" style="margin: 9px">
                <i class="icon-search_24px"></i>
                Select workspace
              </button>
            </ng-container>
          </div>
        </div>
        <div class="box-item" style="width: 780px;padding: 0 25px;margin: 0;">
          <div style="margin: 0 0 0 0; padding: 0 0 0 0; display: flex;justify-content: flex-end;">
            <i style="cursor:pointer;font-size:27px;color: var(--primary-1);transform: rotate(90deg);margin-right: 14px" class="icon-compare_arrows_24px"></i>
          </div>
        </div>
        <div class="box-item" style="width: 780px;padding-top: 0;margin: 0;">

          <span class="subtitle-4">
            Cloning to:
          </span>
          <div style="display: flex;flex-wrap: nowrap;" [ngStyle]="{'background-color': cloningToItem ?  '#fff' : '#e5e9fa'}">
            <div class="left-box">
              XL, INC, VOL, IND,ACC,AUTO CASCO | 2017 20769 | A.M.MA(BEL)
            </div>
            <div class="right-box">
              <button class="a-buttons-contained override">
                <i class="icon-search_24px"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="box-item" style="width: 780px;">
          <div class="default-radio">
            <nz-radio-group [(ngModel)]="projectForClone">
              <label nz-radio [nzValue]="-1" class="body-2">Keep Source Project Name(s)</label>
              <label nz-radio [nzValue]="0" class="body-2" [ngClass]="{'label-border': projectForClone == 0}">
                Clone into New Project
                <div class="toHide"></div>
              </label>
              <label nz-radio [nzValue]="1" class="body-2" [ngClass]="{'label-border': projectForClone == 1}">
                Clone into Existing Project
                <div class="toHide"></div>
              </label>
            </nz-radio-group>
          </div>
          <div style="display: flex;justify-content: center">
            <div *ngIf="projectForClone == 0" class="input-group" style="position: relative;display: flex;flex-wrap: wrap;
    align-items: stretch;
    justify-content: center;
    padding: 13px;
    bottom: 3px;
    z-index: 0;
    border: 3px solid var(--primary-1);
">
              <input class="a-textfield-standard" type="text" placeholder="Project name" style="margin: 0 16px;">
              <input class="a-textfield-standard" type="text" placeholder="Project description" style="margin: 0 16px;">
            </div>
            <div *ngIf="projectForClone == 1" class="input-group" style="position: relative;display: flex;flex-wrap: wrap;
    align-items: stretch;
    justify-content: center;
    padding: 13px;
    bottom: 3px;
    z-index: 0;
    border: 3px solid var(--primary-1);
">
              <nz-select
                style="width: 270px;"
                nzShowSearch
                class="a-dropdown-small"
                nzPlaceHolder="Choose target workspace"
              >
                <nz-option nzLabel="17p3398" nzValue="17p3398"></nz-option>
                <nz-option nzLabel="17p3398" nzValue="17p3398"></nz-option>
                <nz-option nzLabel="17p3398" nzValue="17p3398"></nz-option>
                <nz-option nzLabel="17p3398" nzValue="17p3398"></nz-option>
                <nz-option nzLabel="17p3398" nzValue="17p3398"></nz-option>
              </nz-select>
            </div>
          </div>
        </div>
        <div class="box-item" style="width: 880px;margin: 0;padding: 0;">
          <nz-divider></nz-divider>
        </div>
        <div class="box-item" style="width: 780px;">
          <div style="margin-top: 20px; display: flex;justify-content: flex-end;">
            <button [ngClass]="{'a-button-text': activeSubTitle === 0, 'a-buttons-outlined': activeSubTitle != 0}">{{ activeSubTitle === 0 ? 'reset' : 'submit'}}</button>
            <button class="a-buttons-contained" style="margin-left: 10px;">clone</button>
            <button class="a-buttons-contained" style="margin-left: 10px;">clone AND open</button>
          </div>
        </div>
      </div>
      <div class="box-container" *ngSwitchCase="1">

      </div>
      <div class="box-container" *ngSwitchCase="2">
        target
      </div>
    </ng-container>
  </div>
</div>

<p-dialog
  [closable]="false"
  [styleClass]="'m-dialog-modal-lg' + (browesing ? ' borderless' : '')"
  appendTo="body"
  [modal]="true"
  [responsive]="true"
  [visible]="searchWorkSpaceModal"
  [baseZIndex]="1"
  [autoZIndex]="false"
>

  <p-header>
    <div class="header">
      <ng-container *ngIf="browesing">
        <div class="previous-container">
          <button class="a-buttons-contained override">
            <i (click)="goToSearchWorkspace()" class="icon-arrow_back_ios_24px"></i>
          </button>
          <h4>
            Browese For Cloning
          </h4>
        </div>
      </ng-container>
      <h4 *ngIf="!browesing">
        Select Workspace
      </h4>
      <div *ngIf="!browesing" class="col-7" [formGroup]="keywordFormGroup">

        <nz-input-group style="z-index: 1001"
                        class="global-search-input-grp"
                        [ngClass]="{'global-search-input-grp-active': 1===1}"
                        [nzSuffix]="suffixIconSearch"
                        [nzAddOnBefore]="prefixIconTag">
          <input searchInput [ngClass]="{'search-page-active-border': 1===1}"
                 (onEnter)="onEnter()"
                 #searchInput
                 formControlName="keyword"  (click)="search()"
                 class="search-input" type="text" nz-input [placeholder]="'Search for Treaty' ">
        </nz-input-group>

        <ng-template #prefixIconTag>
          <div class="prefix-wrapper">
            <button class="code-button" nz-popover nzPlacement="bottomLeft" nzTrigger="click">
            </button>
          </div>
        </ng-template>

        <ng-template #suffixIconSearch>
          <i nz-icon *ngIf=" searchInput?.value?.length>=1" class="item-close clickable-item" (click)="clearSearchValue()" nzType="close"
             nzTheme="outline"></i>
          <i [ngClass]="{'search-page-active-shape': 1===1}" (click)="onEnter()" style="cursor: pointer"
             class="icon-search_24px"></i>
        </ng-template>

      </div>
      <i (click)="searchWorkSpaceModal=false" style="cursor: pointer" class="icon-close_24px"></i>
    </div>
  </p-header>

  <ng-container *ngIf="!browesing">
    <div style="height:600px;">

      <app-table [tableColumn]="columns" [sortable]="false" [totalRecords]="paginationOption?.total" #dt
                 [listOfData]="contracts" [virtualScroll]="true" (selectOne)="openWorkspaceInSlider($event)"
                 [tableWidth]="'1000px'" (loadMore)="loadMore($event)"
                 (filterData)="filterDataa($event.searchValue, $event.searchAddress)"
                 (dbClickItem)="getPlts()"
                 [tableHeight]="'480px'"
                 (onRowSelect)="onRowSelect($event)"
                 (onRowUnselect)="onRowUnselect($event)"
                 [selectionMode]="'single'"
                 [loading]="loading">
      </app-table>

    </div>
  </ng-container>

  <ng-container *ngIf="browesing">
    <div class="content">
      <div class="left">
        <app-plt-left-menu
          [menuInputs]="{
            wsId: workspaceId,
            uwYear: uwy,
            projects: projects,
            showDeleted: showDeleted,
            filterData: filterData,
            filters: filters,
            deletedPltsLength: (listOfDeletedPlts | keys).length,
            selectedListOfPlts: selectedListOfPlts,
            systemTagsCount: systemTagsCount,
            tagForMenu: tagForMenu,
            wsHeaderSelected: wsHeaderSelected,
            pathTab:true
          }"
        >

        </app-plt-left-menu>
      </div>
      <div class="right">
        <div class="title-as-tab">
          <span>
            PLTs
          </span>
        </div>
        <div class="PLTs-content">
          <app-plt-main-table
            [tableInputs]="{
                  contextMenuItems: contextMenuItems,
                  filterInput: filterInput,
                  pltColumns: pltColumns,
                  listOfPltsData: listOfPltsData,
                  listOfDeletedPltsData: listOfDeletedPltsData,
                  listOfPltsCache: listOfPltsCache,
                  listOfDeletedPltsCache: listOfDeletedPltsCache,
                  listOfPlts: listOfPlts,
                  listOfDeletedPlts: listOfDeletedPlts,
                  selectedListOfPlts: selectedListOfPlts,
                  selectedListOfDeletedPlts: selectedListOfDeletedPlts,
                  selectAll: selectAll,
                  someItemsAreSelected: someItemsAreSelected,
                  showDeleted: showDeleted,
                  filterData: filterData,
                  filters: filters,
                  sortData: sortData
                }"
            (onCheckAll)="checkAll($event)"
            (onFilter)="filter($event)"
            (onPltClick)="toggleSelectPlts($event)"
            (onSelectSinglePlt)="selectSinglePLT($event)"
          ></app-plt-main-table>
        </div>
      </div>
    </div>
  </ng-container>

  <p-footer>
    <div class="footer">
      <button (click)="cancelModal()" class="a-button-text">cancel</button>
      <button (click)="handleModalClick()" class="a-buttons-contained">
        ADD
      </button>
    </div>
  </p-footer>

</p-dialog>
