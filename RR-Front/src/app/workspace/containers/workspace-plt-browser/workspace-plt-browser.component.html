<nz-layout>
  <div nz-row>
    <div nz-col nzSpan="22">
      <div class="mr-3 ml-3">
        <div class="title-wrapper" nz-row style="margin-top: 50px;">
          <div class="title-section">
            <h3>PLT Manager</h3>
          </div>
        </div>

        <div nz-row class="my-tabs">
          <div nz-col nzSpan="4">
            <nz-tabset class="tabset-left">
              <nz-tab nzTitle="Path">
                <div class="path-content">
                  <div class="title">
                    <span>
                      <i class="icon-window-section"></i>
                      02PY376 - 2019
                    </span>
                    <ul class="title-list">
                      <li *ngFor="let path of paths">
                        <i [ngClass]="path.icon"></i>
                        {{path.text}}
                      </li>
                    </ul>
                  </div>
                </div>
              </nz-tab>
              <nz-tab nzTitle="Tags">
                <div class="Tags-content">
                  <div nz-row class="button-reset-filter-by-tag">
                    <button (click)="currentTag= null" nz-button nzType="default" nzShape="circle"
                            style=" float: right; border: 0px solid;">
                      <i nz-icon nzType="undo" nzTheme="outline"></i></button>
                  </div>
                  <div nz-row class="tags-title-section" style="margin-top: -20px;">System Tags</div>
                  <div *ngFor="let tag of systemTags" nz-row class="ml-3 mt-1">
                    <span class="chips" [ngStyle]="{'background-color': tag.tagColor}" (click)="currentTag= tag">
                      {{tag.tagName}}
                      <span [ngStyle]="{'background-color': tag.innerTagColor}"
                            class="inner-chip">{{tag.innerTagContent}}</span>
                    </span>
                  </div>

                  <div nz-row class="tags-title-section">User tags <i class="icon-plus-circle"></i></div>
                  <div *ngFor="let tag of userTags" nz-row class="ml-3 mt-1">
                    <span class="chips" [ngStyle]="{'background-color': tag.tagColor, 'border-color': tag.border}">
                      {{tag.tagName}}
                      <span [ngStyle]="{'background-color': tag.innerTagColor}"
                            class="inner-chip">{{tag.innerTagContent}}</span>
                    </span>
                  </div>

                </div>
              </nz-tab>
            </nz-tabset>
          </div>

          <div nz-col nzSpan="20">
            <nz-tabset class="tabset-right">
              <nz-tab nzTitle="PLTs">
                <div class="PLTs-content">
                  <table class="table plt-table">
                    <thead>
                    <tr>
                      <th></th>
                      <th>User Tags</th>
                      <th>
                        PLT ID
                        <div class="filter-input">
                          <i class="icon-search"></i>
                          <input type="text">
                        </div>
                      </th>
                      <th>
                        PLT Name
                        <div class="filter-input">
                          <i class="icon-search"></i>
                          <input type="text">
                        </div>
                      </th>
                      <th>Peril</th>
                      <th>Region Peril Code</th>
                      <th>Region Peril Name</th>
                      <th>Grain</th>
                      <th>Vendor System</th>
                      <th>RAP</th>
                      <th><i nz-icon><i class="icon-focus-add"></i></i></th>
                      <th><i nz-icon><i class="icon-note"></i></i></th>
                      <th><i nz-icon><i class="icon-focus-add"></i></i></th>
                    </tr>
                    </thead>
                    <tbody>
                    <!--| filterByBagde: currentTag-->
                    <tr *ngFor="let plt of plts | filterByBadge: currentTag" style="cursor: pointer"
                        [ngClass]="{'active_plt_item': plt.selected }">
                      <td [ngClass]="{'active_plt_item_eye': plt.selected }" (click)="openPltInDrawer(plt)">
                        <div *ngIf="plt.selected">
                          <i nz-icon nzType="eye" nzTheme="outline"></i>
                        </div>
                        <div *ngIf="!plt.selected">
                          <i nz-icon nzType="eye-invisible" nzTheme="outline"></i>
                        </div>
                      </td>
                      <td>
                        <div class="td-wrapper-tags">
                          <span *ngFor="let tag of plt.systemTags"
                                [ngStyle]="{'background-color': getColor(tag.tagId, 'system')}">&nbsp;</span>

                          <span *ngFor="let tag of plt.userTags"
                                [ngStyle]="{'background-color': getColor(tag.tagId, 'user')}">&nbsp;</span>
                          <!--<span style ="background-color: #0b97c4">&nbsp;</span>-->
                        </div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.pltId}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.pltName}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.peril}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.regionPerilCode}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.regionPerilName}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.grain}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.vendorSystem}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper">{{plt.rap}}</div>
                      </td>
                      <td>
                        <div class="td-wrapper-check">
                          <div>
                            <i [ngClass]="{'icon-check-circle': plt.d, 'icon-remove_24px': !plt.d }"></i>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div class="td-wrapper-check">
                          <i [ngClass]="{'icon-check-circle': plt.note, 'icon-remove_24px': !plt.note }"></i>
                        </div>
                      </td>
                      <td>
                        <div class="td-wrapper-check">
                          <i [ngClass]="{'icon-check-circle': plt.checked, 'icon-remove_24px': !plt.checked }"></i>
                        </div>
                      </td>
                    </tbody>
                  </table>
                </div>
              </nz-tab>
            </nz-tabset>
          </div>

        </div>
      </div>
    </div>

    <div nz-col nzSpan="2">
      <div class="right-column">
        <div class="navigation-icons pt-5" style="min-height: 100px">
          <i class="icon-map-pin-alt"></i>
          <i class="icon-arrow_back_ios_24px mt-2" (click)="openDrawer()"></i>
        </div>
      </div>
    </div>
  </div>
</nz-layout>


<nz-drawer [nzClosable]="false" [nzVisible]="visible" nzPlacement="right" (nzOnClose)="closeDrawer()" [nzWidth]=650
           [nzZIndex]="2000">

  <div>

    <div class="navigation-icons-drawer">
      <i class="icon-arrow_forward_ios_24px mt-2" (click)="closeDrawer()"></i>
    </div>

    <div class="tabset-drawer">
      <nz-tabset>
        <nz-tab nzTitle="Basket">
          <div class="basket-content" nz-row>
            <div class="title-section-drawer">
              <div nz-col nzSpan="18">
                <h3>4 PLTs selected</h3>
              </div>
              <div nz-col nzSpan="4">
                <button>
                  <i class="icon-menu_24px"></i>
                  <span>ACTIONS</span>
                </button>
              </div>
            </div>
            <div>
              <table class="table">
                <tbody>
                <tr *ngFor="let plt of plts">
                  <td>{{plt.pltId}}</td>
                  <td>{{plt.pltName}}</td>
                  <td>{{plt.peril}}</td>
                  <td>{{plt.regionPerilName}}</td>
                  <td>{{plt.rap}}</td>
                </tr>
                </tbody>
              </table>
            </div>
            <div class="button-section-drawer">
              <div nz-col nzSpan="14">&nbsp;</div>
              <div nz-col nzSpan="4" class="cancel">
                <button>
                  <span>CANCEL</span>
                </button>
              </div>
              <div nz-col nzSpan="4" class="add">
                <button>
                  <span>ADD</span>
                </button>
              </div>
              <div nz-col nzSpan="2">&nbsp;</div>
            </div>
          </div>
        </nz-tab>

        <nz-tab nzTitle="PLT Details">
          <div nz-row>
            <div class="title-section-drawer">
              <div nz-col nzSpan="18">
                <h3>NATC-USM</h3>
              </div>
              <div nz-col nzSpan="4">
                <button>
                  <i class="icon-menu_24px"></i>
                  <span>ACTIONS</span>
                </button>
              </div>
            </div>
          </div>
          <div class="plt-details-content">
            <nz-tabset class="tabset-plt-details">
              <nz-tab nzTitle="Summary">
                <div class="summary-content">
                  <div class="summary-tags mt-2 mb-3">
                    <nz-tag [nzColor]="'#7BBE31'">TC</nz-tag>
                    <nz-tag [nzColor]="'#7BBE31'">NATC-USM</nz-tag>
                    <nz-tag [nzColor]="'#06B8FF'">Default</nz-tag>
                    <nz-tag [nzColor]="'#893EFF'">Pricing V1</nz-tag>
                  </div>
                  <div class="summary-table">
                    <div nz-row>
                      <span nz-col nzSpan="6">PLT ID:</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">PLT File Name:</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Target RAP:</span>
                      <span nz-col nzSpan="18">*****<br>****</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Peril:</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Region Peril:</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Currency:</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Grain:</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Representation</span>
                      <span nz-col nzSpan="18">*********</span></div>
                    <div nz-row>
                      <span nz-col nzSpan="6">User Notes:</span>
                      <span nz-col nzSpan="18">*********</span></div>
                    <div nz-row>
                      <span nz-col nzSpan="6">Sourced From</span>
                      <span nz-col nzSpan="18">*********</span>
                    </div>
                  </div>
                </div>
              </nz-tab>
              <nz-tab nzTitle="EP Metrics">
                <div class="ep-metrics-content">
                  <div nz-row class="dropdowns">
                    <div nz-col [nzSpan]="6">
                      <div class="dropdown-currency">
                        <nz-dropdown [nzTrigger]="'click'">
                          <a nz-dropdown>
                            <div style="display:flex">
                              <div class="dropdown-currency-title">
                                <span class="dropdown-currency-header">Display Currency</span>
                                <span class="dropdown-currency-subtitle"
                                      style="font-weight: bold;">{{currencySelected}}</span>
                              </div>
                              <i nz-icon type="down"></i>
                            </div>
                          </a>
                          <ul nz-menu>
                            <li nz-menu-item (click)="currencySelected = currency?.label"
                                *ngFor="let currency of currencies">{{currency?.label}}
                            </li>
                          </ul>
                        </nz-dropdown>
                      </div>
                    </div>
                    <div nz-col [nzSpan]="1">&nbsp;</div>
                    <div nz-col [nzSpan]="6">
                      <div class="dropdown-financial-unit">
                        <nz-dropdown [nzTrigger]="'click'">
                          <a nz-dropdown>
                            <div style="display:flex">
                              <div class="dropdown-unit-title">
                                <span class="dropdown-unit-header">Financial Unit</span>
                                <span class="dropdown-unit-subtitle"
                                      style="font-weight: bold;">{{financialUnitSelected}}</span>
                              </div>
                              <i nz-icon type="down"></i>
                            </div>
                          </a>
                          <ul nz-menu>
                            <li nz-menu-item (click)="financialUnitSelected = unit?.label"
                                *ngFor="let unit of units">{{unit?.label}}
                            </li>
                          </ul>
                        </nz-dropdown>
                      </div>
                    </div>
                    <div nz-col [nzSpan]="4">&nbsp;</div>
                    <div nz-col [nzSpan]="6">
                      <div class="dropdown-ep-metric">
                        <nz-dropdown [nzTrigger]="'click'">
                          <a nz-dropdown nz-row>
                            <div nz-col [nzSpan]="12">
                              Metric
                            </div>
                            <div nz-col [nzSpan]="6">&nbsp;</div>
                            <i nz-icon type="down" nz-col [nzSpan]="6"></i>
                          </a>
                          <ul nz-menu>
                            <li nz-menu-item>Metric 1</li>
                            <li nz-menu-item>Metric 2</li>
                            <li nz-menu-item>Metric 3</li>
                          </ul>
                        </nz-dropdown>
                      </div>
                    </div>
                    <div nz-col [nzSpan]="1">&nbsp;</div>
                  </div>
                  <div class="ep-metric-tabset">
                    <nz-tabset>
                      <nz-tab [nzTitle]="table">
                        <ng-template #table><i class="icon-grid_on_24px"></i></ng-template>
                        <div class="metric-table-content">
                          <table class="table metric-table">
                            <thead>
                            <tr>
                              <th>Retrun Period <i class="icon-plus-circle"></i></th>
                              <th>OEP</th>
                              <th>AEP</th>
                              <th>TVaR-OEP</th>
                              <th>TVaR-AEP</th>
                            </tr>
                            </thead>
                            <tbody *ngFor="let metric of metrics">
                            <tr>
                              <td align="right">{{metric.retrunPeriod}}</td>
                              <td>{{metric.OEP}}</td>
                              <td>{{metric.AEP}}</td>
                              <td>{{metric.TVaR_AEP}}</td>
                              <td>{{metric.TVaR_OEP}}</td>
                            </tr>
                            </tbody>
                          </table>
                        </div>
                        <div class="metric-table-footer">
                          <div nz-row>
                            <div nz-col nzSpan="5" style="text-align: right">Pure Premium</div>
                            <div nz-col nzSpan="1">&nbsp;</div>
                            <div nz-col nzSpan="5">323,849</div>
                            <div nz-col nzSpan="5">323,884</div>
                            <div nz-col nzSpan="5">323,8894</div>
                            <div nz-col nzSpan="3">&nbsp;</div>
                          </div>
                          <div nz-row>
                            <div nz-col nzSpan="5" style="text-align: right">Standart Deviation</div>
                            <div nz-col nzSpan="1">&nbsp;</div>
                            <div nz-col nzSpan="5">5,806,767</div>
                            <div nz-col nzSpan="5">5,806,767</div>
                            <div nz-col nzSpan="5">5,806,767</div>
                            <div nz-col nzSpan="3">&nbsp;</div>
                          </div>
                          <div nz-row>
                            <div nz-col nzSpan="5" style="text-align: right">Cov</div>
                            <div nz-col nzSpan="1">&nbsp;</div>
                            <div nz-col nzSpan="5">17.83</div>
                            <div nz-col nzSpan="5">17.83</div>
                            <div nz-col nzSpan="5">17.83</div>
                            <div nz-col nzSpan="3">&nbsp;</div>
                          </div>

                        </div>
                      </nz-tab>
                      <nz-tab [nzTitle]="chart">
                        <ng-template #chart><i class="icon-show_chart_24px"
                                               style="border-bottom: 2px solid #0700cf; border-left: 2px solid #0700cf;"></i>
                        </ng-template>
                        <div class="metric-chart-content">
                          <img src="../../../../assets/images/RRchartInVision.png">
                        </div>
                      </nz-tab>
                    </nz-tabset>
                  </div>
                </div>
              </nz-tab>
              <nz-tab nzTitle="Other Metrics">
                <div class="other-metrics-content"></div>
              </nz-tab>
              <nz-tab nzTitle="Calibration">
                <div class="calibration-content">
                  <nz-tabset>

                    <nz-tab nzTitle="Thread">
                      <div class="thread-content">

                        <div nz-row *ngFor="let thead of theads">
                          <div nz-col nzSpan="6" class="title">
                            {{thead.title}}
                          </div>

                          <div nz-col nzSpan="6" class="cards" *ngFor="let card of thead.cards">
                            <nz-tag [nzColor]="'#000'">{{card.id}}</nz-tag>
                          </div>
                        </div>

                      </div>
                    </nz-tab>

                    <nz-tab nzTitle="Impact">
                      <div class="impact-content">
                        <div nz-row class="dropdowns">
                          <div nz-col [nzSpan]="6">
                            <div class="dropdown-currency">
                              <nz-dropdown [nzTrigger]="'click'">
                                <a nz-dropdown>
                                  <div style="display:flex">
                                    <div class="dropdown-currency-title">
                                      <span class="dropdown-currency-header">Display Currency</span>
                                      <span class="dropdown-currency-subtitle"
                                            style="font-weight: bold;">{{currencySelected}}</span>
                                    </div>
                                    <i nz-icon type="down"></i>
                                  </div>
                                </a>
                                <ul nz-menu>
                                  <li nz-menu-item (click)="currencySelected = currency?.label"
                                      *ngFor="let currency of currencies">{{currency?.label}}
                                  </li>
                                </ul>
                              </nz-dropdown>
                            </div>
                          </div>
                          <div nz-col [nzSpan]="1">&nbsp;</div>
                          <div nz-col [nzSpan]="6">
                            <div class="dropdown-financial-unit">
                              <nz-dropdown [nzTrigger]="'click'">
                                <a nz-dropdown>
                                  <div style="display:flex">
                                    <div class="dropdown-unit-title">
                                      <span class="dropdown-unit-header">Financial Unit</span>
                                      <span class="dropdown-unit-subtitle"
                                            style="font-weight: bold;">{{financialUnitSelected}}</span>
                                    </div>
                                    <i nz-icon type="down"></i>
                                  </div>
                                </a>
                                <ul nz-menu>
                                  <li nz-menu-item (click)="financialUnitSelected = unit?.label"
                                      *ngFor="let unit of units">{{unit?.label}}
                                  </li>
                                </ul>
                              </nz-dropdown>
                            </div>
                          </div>
                          <div nz-col [nzSpan]="4">&nbsp;</div>
                          <div nz-col [nzSpan]="6">
                            <div class="dropdown-ep-metric">
                              <nz-dropdown [nzTrigger]="'click'">
                                <a nz-dropdown nz-row>
                                  <div nz-col [nzSpan]="12">
                                    Metric
                                  </div>
                                  <div nz-col [nzSpan]="6">&nbsp;</div>
                                  <i nz-icon type="down" nz-col [nzSpan]="6"></i>
                                </a>
                                <ul nz-menu>
                                  <li nz-menu-item>Metric 1</li>
                                  <li nz-menu-item>Metric 2</li>
                                  <li nz-menu-item>Metric 3</li>
                                </ul>
                              </nz-dropdown>
                            </div>
                          </div>
                          <div nz-col [nzSpan]="1">&nbsp;</div>
                        </div>
                        <div class="impact-tabset">
                          <nz-tabset>
                            <nz-tab [nzTitle]="table">
                              <ng-template #table><i class="icon-grid_on_24px"></i></ng-template>
                              <div class="metric-table-content">
                                <table class="table metric-table">
                                  <thead>
                                  <tr>
                                    <th>Retrun Period <i class="icon-plus-circle"></i></th>
                                    <th>OEP</th>
                                    <th>AEP</th>
                                    <th>TVaR-OEP</th>
                                    <th>TVaR-AEP</th>
                                  </tr>
                                  </thead>
                                  <tbody *ngFor="let metric of metrics">
                                  <tr>
                                    <td align="right">{{metric.retrunPeriod}}</td>
                                    <td>{{metric.OEP}}</td>
                                    <td>{{metric.AEP}}</td>
                                    <td>{{metric.TVaR_AEP}}</td>
                                    <td>{{metric.TVaR_OEP}}</td>
                                  </tr>
                                  </tbody>
                                </table>
                              </div>
                              <div class="metric-table-footer">
                                <div nz-row>
                                  <div nz-col nzSpan="5" style="text-align: right">Pure Premium</div>
                                  <div nz-col nzSpan="1">&nbsp;</div>
                                  <div nz-col nzSpan="5">323,849</div>
                                  <div nz-col nzSpan="5">323,884</div>
                                  <div nz-col nzSpan="5">323,8894</div>
                                  <div nz-col nzSpan="3">&nbsp;</div>
                                </div>
                                <div nz-row>
                                  <div nz-col nzSpan="5" style="text-align: right">Standart Deviation</div>
                                  <div nz-col nzSpan="1">&nbsp;</div>
                                  <div nz-col nzSpan="5">5,806,767</div>
                                  <div nz-col nzSpan="5">5,806,767</div>
                                  <div nz-col nzSpan="5">5,806,767</div>
                                  <div nz-col nzSpan="3">&nbsp;</div>
                                </div>
                                <div nz-row>
                                  <div nz-col nzSpan="5" style="text-align: right">Cov</div>
                                  <div nz-col nzSpan="1">&nbsp;</div>
                                  <div nz-col nzSpan="5">17.83</div>
                                  <div nz-col nzSpan="5">17.83</div>
                                  <div nz-col nzSpan="5">17.83</div>
                                  <div nz-col nzSpan="3">&nbsp;</div>
                                </div>

                              </div>
                            </nz-tab>
                            <nz-tab [nzTitle]="chart">
                              <ng-template #chart><i class="icon-show_chart_24px"
                                                     style="border-bottom: 2px solid #0700cf; border-left: 2px solid #0700cf;"></i>
                              </ng-template>
                              <div class="metric-chart-content">
                                <img src="../../../../assets/images/RRchartInVision.png">
                              </div>
                            </nz-tab>
                          </nz-tabset>
                        </div>
                      </div>
                    </nz-tab>

                  </nz-tabset>
                </div>
              </nz-tab>
              <nz-tab nzTitle="Lineage">
                <div class="lineage-content">
                  <nz-tabset>
                    <nz-tab nzTitle="Dependencies">
                      <div class="dependencies-content"></div>
                    </nz-tab>
                    <nz-tab nzTitle="Usage">
                      <div class="usage-content"></div>
                    </nz-tab>
                  </nz-tabset>
                </div>
              </nz-tab>
              <nz-tab nzTitle="Impact to layer">
                <div class="impact-to-layer-content"></div>
              </nz-tab>
            </nz-tabset>
          </div>
        </nz-tab>
      </nz-tabset>
    </div>

  </div>
</nz-drawer>



