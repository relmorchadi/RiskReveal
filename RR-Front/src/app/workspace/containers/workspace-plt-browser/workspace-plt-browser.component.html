<div class="plt-browser-wrapper">
  <div class="a-app-wrapper">
    <div class="a-app-header">
      <h4>PLT Manager</h4>
    </div>
    <div class="my-tabs">
      <app-plt-left-menu
        [menuInputs]="{
            tagContextMenu: tagContextMenu,
            wsId: workspaceId,
            uwYear: uwy,
            projects: projects,
            showDeleted: tableInputs['showDeleted'],
            filterData: tableInputs['filterData'],
            filters: tableInputs['filters'],
            addTagModalIndex: tagModalIndex,
            fromPlts: fromPlts,
            deletedPltsLength: (tableInputs['listOfDeletedPltsData'] | keys).length,
            userTags: userTags,
            systemTags: systemTags,
            selectedListOfPlts: tableInputs['selectedListOfPlts'],
            systemTagsCount: systemTagsCount,
            _tagModalVisible: tagModalVisible,
            _editingTag: editingTag,
            _modalSelect: modalSelect,
            tagForMenu: tagForMenu,
            wsHeaderSelected: wsHeaderSelected,
            pathTab:true,
            selectedItemForMenu: selectedItemForMenu
          }"
        (onAssignPltsToTag)="assignPltsToTag($event)"
        (onCreateTag)="createTag($event)"
        (onProjectFilter)="filter($event)"
        (onEditTag)="editTag()"
        (onResetPath)="resetPath()"
        (onSelectProjects)="setSelectedProjects($event)"
        (onSelectSysTagCount)="selectSystemTag($event)"
        (onSetFilters)="setFilters($event)"
        (onSetFromPlts)="setFromPlts($event)"
        (onSetSelectedUserTags)="setUserTags($event)"
        (onToggleDeletedPlts)="toggleDeletePlts($event)"
        (setTagModalIndex)="setModalIndex($event)"
        (setTagModalVisibility)="setTagModal($event)"
        (onSetTagForMenu)="setTagForMenu($event)"
        (onSetRenameTag)="setRenameTag($event)"
        (emitFilters)="emitFilters($event)"
        (unCkeckAllPlts)="unCheckAll()"
        (onWsHeaderSelection)="setWsHeaderSelect($event)"
        (onModalSelect)="setModalSelectedItems($event)"
      >

      </app-plt-left-menu>
      <div class="tabset-right" [ngStyle]="{ 'width': leftIsHidden ? 'calc(100vw - 212px - 80px - 174px + 130px)' : 'calc(100vw - 212px - 80px - 177px)'}">
        <div class="title-as-tab">
          <span>
            PLTs
          </span>
          <div class="right">
            <div>
              {{tableInputs['selectedListOfPlts']?.length ? tableInputs['selectedListOfPlts']?.length + ' Rows are selected' : ''}}
            </div>
            <nz-dropdown [nzTrigger]="'hover'" [nzPlacement]="'bottomRight'" >
              <a style="max-height: 28px;display: flex;" nz-dropdown>
                <i class="icon-menu_24px"></i>
              </a>
              <ul nz-menu style="font-size: 12px">
                <li nz-menu-item (click)="resetSort()">Reset Sort</li>
                <li nz-menu-item (click)="resetFilters()">Reset Filters</li>
                <li nz-menu-item (click)="resetSort();resetFilters()">Reset Sort/Filters</li>

                <li nz-menu-divider></li>

                <li nz-menu-item (click)="toggleColumnsManager()" >Manage Columns</li>

                <li nz-menu-divider></li>

                <li (click)="unselectAll()" nz-menu-item>Unselect All</li>

              </ul>
            </nz-dropdown>
          </div>
        </div>
        <div class="PLTs-content">
          <app-plt-main-table
            [tableInputs]="tableInputs"
            (actionDispatcher)="tableActionDispatcher($event)"
          ></app-plt-main-table>
        </div>
      </div>
    </div>
  </div>
</div>

<app-plt-right-menu
  (actionDispatcher)="rightMenuActionDispatcher($event)"
  [Inputs]="rightMenuInputs"
></app-plt-right-menu>

<p-dialog
  [visible]="managePopUp"
  [closable]="false"
  styleClass="m-dialog-modal-lg-h"
  appendTo="body"
  [modal]="true"
  [autoZIndex]="false"
  [responsive]="true"
>

  <p-header>
    <div class="header">
      <h4>
        Columns Manager
      </h4>
      <i style="cursor: pointer" (click)="toggleColumnsManager()" class="icon-close_24px"></i>
    </div>
  </p-header>

  <div cdkDropList class="m-box-d" (cdkDropListDropped)="drop($event)">
    <ng-container *ngFor="let col of pltColumnsForConfig;let i=index">
      <div class="m-box-drag" *ngIf="col.header" cdkDrag>
        <div class="m-box-overlay">
          <div class="left">
            <div class="burger">
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
            </div>
            <span class="subtitle-2">
          {{col.header}}
        </span>
          </div>
          <div class="right">
            <i *ngIf="col?.active" (click)="toggleCol(i)" class="icon-visibility_24px"></i>
            <i *ngIf="!col?.active" (click)="toggleCol(i)" class="icon-visibility_off_24px"></i>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <p-footer>
    <div class="footer">
      <button (click)="toggleColumnsManager()" nz-button class="a-button-text">cancel</button>
      <button class="a-buttons-contained" (click)="saveColumns()" nz-button>
        Save
      </button>
    </div>
  </p-footer>
</p-dialog>
