<!--<nz-table
  *ngIf="virtualScroll"
  nzVirtualScroll #dt
  [nzVirtualItemSize]="12"
  [nzData]="listOfData"
  [nzFrontPagination]="false"
  [nzShowPagination]="false"
  [nzScroll]="{ x: tableWidth, y: tableHeight }"
>
  <thead>
  <tr>
    <th *ngFor="let col of tableColumn"
        [nzWidth]="col.width"
        [nzShowSort]="col.sorted"
        [nzSortKey]="col.field"
    >
      <span *ngIf="col.display">{{col.header}}</span>
      <div class="search-bar-table" *ngIf="col.filtered">
        <nz-input-group [nzPrefix]="suffixIconSearch">
          <input type="text" (input)="filterCol($event.target.value, col?.filterParam)" nz-input/>
        </nz-input-group>
      </div>
    </th>
  </tr>
  </thead>
  <tbody>
  <ng-template nz-virtual-scroll let-data let-index="index">
    <tr [ngClass]="{'active_contract_item': currentSelectedItem === data }" (click)="selectRow(data)"
        *ngFor="let data of dt.data">
      <td *ngFor="let col of tableColumn">
        <i *ngIf="col.type === 'date'" class="icon-calendar-alt"></i>
        <i (click)="col?.handler(data)" [ngClass]="col?.class"></i>
        {{ data[col.field] }}
      </td>
    </tr>
  </ng-template>
  </tbody>
</nz-table>


<nz-table
  #dt
  *ngIf="!virtualScroll"
  [nzData]="listOfData"
  [nzPageSize]="totalRecords"
>
  <thead>
  <tr>
    <th *ngFor="let col of tableColumn"
        [nzWidth]="col.width"
        [nzShowSort]="col.sorted"
        [nzSortKey]="col.field"
    >
      <span *ngIf="col.display">{{col.header}}</span>
      <div class="search-bar-table" *ngIf="col.filtered">
        <nz-input-group [nzPrefix]="suffixIconSearch">
          <input type="text" (input)="filterCol($event.target.value, col?.filterParam)" nz-input/>
        </nz-input-group>
      </div>
    </th>
  </tr>
  </thead>
  <tbody>
  <tr [ngClass]="{'active_contract_item': currentSelectedItem === data }" (click)="selectRow(data)"
      *ngFor="let data of dt.data">
    <td *ngFor="let col of tableColumn">
      <i *ngIf="col.type === 'date'" class="icon-calendar-alt"></i>
      <i (click)="col?.handler(tableColumn)" [ngClass]="col?.class"></i>
      {{ data[col.field] }}
    </td>
  </tr>
  </tbody>
</nz-table>

<ng-template #suffixIconSearch>
  <i nz-icon type="search"></i>
</ng-template>-->
<!--Total records : {{totalRecords |json}}-->
<!--<div>
  <i nz-tooltip nzTitle="Select All" nzPlacement="bottom" (click)="selectAll()" class="icon-focus-add icons-font"></i>
  <i nz-tooltip nzTitle="Unselect All" nzPlacement="bottom" (click)="unselectAll()" class="icon-minus-square icons-font"></i>
</div>-->

<p-contextMenu #cm [model]="items"></p-contextMenu>

<nz-spin [nzSpinning]="loading" [nzDelay]="700">
  <p-table *ngIf="virtualScroll" (scroll)="onElementScroll($event)"
           [value]="listOfData" #dt [columns]="tableColumn" [resizableColumns]="true"
           [scrollable]="true" [scrollHeight]="tableHeight" [rows]="50" [totalRecords]="totalRecords"
           [virtualScroll]="true" (onLazyLoad)="loadDataOnScroll($event)"
           [lazy]="true" [virtualRowHeight]="50" [showLoader]="false" [(contextMenuSelection)]="contextSelectedItem"
           [contextMenu]="cm" class="table-ngPrime"
           [loading]="loading"
  >
    <ng-template pTemplate="colgroup" let-columns>
      <colgroup>
        <col *ngFor="let col of columns" [ngStyle]="{'width': col?.width}">
      </colgroup>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
      <tr *ngIf="!sortable">
        <th *ngFor="let col of columns" pResizableColumn>
        <span [ngStyle]="{'visibility': col?.display ? 'unset' : 'hidden'}" style="display:flex">
          {{col?.header}}
          <ng-container *ngIf="col.type === 'checkbox'">
            <label style="margin-top:20px" nz-checkbox [(ngModel)]="allChecked" (ngModelChange)="updateAllChecked()"
                   [nzIndeterminate]="indeterminate"></label>
            <i (click)="sort()" style="cursor: pointer;" nz-icon nzType="down" nzTheme="outline"></i>
          </ng-container>
        </span>
          <div class="search-bar-table" *ngIf="col?.filtered">
            <i class="fa fa-search" style="margin: 6px 4px 4px 6px"></i>
            <input pInputText type="text" (input)="filterCol($event.target.value, col?.filterParam)">
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
      <tr [pContextMenuRow]="rowData" [ngClass]="{'active_contract_item': rowData?.selected, 'selected_contract_item': rowData === currentSelectedItem}">
        <ng-container *ngFor="let col of columns">
          <td *ngIf="col?.type ==='checkbox'">
            <div style="display:flex">
              <label nz-checkbox [(ngModel)]="rowData.selected" (ngModelChange)="uncheckRow()"></label>
            </div>
          </td>
          <td *ngIf="col?.type !=='checkbox' && col?.type !== 'icon' " (click)="selectRow(rowData, i)">
            <div style="display:flex">
              <i *ngIf="col?.type === 'date'" class="icon-calendar-alt"></i>
              <span [title]="rowData[col?.field]" class="text-wrapper">{{rowData[col?.field]}}</span>
            </div>
          </td>
          <td *ngIf="col?.type === 'icon'">
            <div style="display:flex">
              <i (click)="handler(col, rowData)" [ngClass]="col?.class"></i>
            </div>
          </td>
        </ng-container>
      </tr>
    </ng-template>
    <ng-template pTemplate="loadingbody" let-columns="columns">
      <tr style="height:34px">
        <td [ngStyle]="{'width': col?.width}" *ngFor="let col of columns">
          <div class="loading-text"></div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</nz-spin>

<nz-spin [nzSpinning]="loading" [nzDelay]="700">
<p-table *ngIf="!virtualScroll"
         [value]="listOfData" [columns]="tableColumn" [resizableColumns]="true"
         [scrollable]="true" [scrollHeight]="tableHeight" [responsive]="true"
         [loading]="loading"
         class="table-ngPrime"
>

  <ng-template pTemplate="colgroup" let-columns>
    <colgroup>
      <col *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
    </colgroup>
  </ng-template>
  <ng-template pTemplate="header" let-columns>
    <tr *ngIf="!sortable">
      <th *ngFor="let col of columns" pResizableColumn>
        <span *ngIf="col?.display" style="display:flex">
          {{col?.header}}
          <ng-container *ngIf="col.type === 'checkbox'">
            <label style="margin-top:20px" nz-checkbox [(ngModel)]="allChecked" (ngModelChange)="updateAllChecked()"
                   [nzIndeterminate]="indeterminate"></label>
            <i (click)="sort()" style="cursor: pointer;" nz-icon nzType="down" nzTheme="outline"></i>
          </ng-container>
        </span>
        <div class="search-bar-table" *ngIf="col?.filtered">
          <i class="fa fa-search" style="margin: 6px 4px 4px 6px"></i>
          <input pInputText type="text" (input)="filterCol($event.target.value, col?.filterParam)">
        </div>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-i="rowIndex" let-rowData let-columns="columns">
    <div *ngIf="listOfData.length == 0">
      No Result
    </div>
    <tr [pContextMenuRow]="rowData"
        [ngClass]="{'active_contract_item': rowData?.selected, 'selected_contract_item': rowData === currentSelectedItem}">
      <ng-container *ngFor="let col of columns">
        <td *ngIf="col?.type ==='checkbox'">
          <div style="display:flex">
            <label nz-checkbox [(ngModel)]="rowData.selected" (ngModelChange)="uncheckRow()"></label>
          </div>
        </td>
        <td *ngIf="col?.type !=='checkbox' && col?.type !== 'icon' " (click)="selectRow(rowData, i)">
          <div style="display:flex">
            <i *ngIf="col?.type === 'date'" class="icon-calendar-alt"></i>
            <span [title]="rowData[col?.field]" class="text-wrapper">{{rowData[col?.field]}}</span>
          </div>
        </td>
        <td *ngIf="col?.type === 'icon'">
          <div style="display:flex">
            <i (click)="handler(col, rowData)" [ngClass]="col?.class"></i>
          </div>
        </td>
      </ng-container>
    </tr>
  </ng-template>
</p-table>
</nz-spin>

<div *ngIf="listOfData.length == 0" style="position: absolute;
    top: 50%;
    right: 50%;
    font-size: 34px;">
  No Result
</div>
